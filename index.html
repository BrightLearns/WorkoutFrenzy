<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>WorkoutFrenzy - Your Personal Workout Tracker</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
  
  <!-- SEO Meta Tags -->
  <meta name="description" content="WorkoutFrenzy: Personalized workout tracker with custom plans, equipment-based exercises, and progress tracking. Build muscle, lose weight, or keep fit with tailored workouts for home or gym." />
  <meta name="keywords" content="workout tracker, fitness app, gym tracker, home workout, muscle building, weight loss, workout plans, exercise tracker" />
  <meta name="author" content="WorkoutFrenzy" />
  <meta name="theme-color" content="#a855f7" />
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://workoutfrenzy.netlify.app/" />
  <meta property="og:title" content="WorkoutFrenzy - Your Personal Workout Tracker" />
  <meta property="og:description" content="Personalized workout tracker with custom plans, equipment-based exercises, and progress tracking. Build muscle, lose weight, or keep fit!" />
  <meta property="og:image" content="https://workoutfrenzy.netlify.app/og-image.png" />
  
  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image" />
  <meta property="twitter:url" content="https://workoutfrenzy.netlify.app/" />
  <meta property="twitter:title" content="WorkoutFrenzy - Your Personal Workout Tracker" />
  <meta property="twitter:description" content="Personalized workout tracker with custom plans, equipment-based exercises, and progress tracking. Build muscle, lose weight, or keep fit!" />
  <meta property="twitter:image" content="https://workoutfrenzy.netlify.app/twitter-image.png" />
  
  <!-- PWA / Mobile -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="WorkoutFrenzy" />
  <link rel="manifest" href="/manifest.json" />
  
  <!-- Favicon -->
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  
  <style>
    *,
    *::before,
    *::after { box-sizing: border-box; }

    :root {
      color-scheme: dark;
      --bg: #050314;
      --surface: #0f172a;
      --surface-elevated: #1e293b;
      --border: rgba(148, 163, 184, 0.2);
      --border-focus: rgba(168, 85, 247, 0.5);
      --text-primary: #f8fafc;
      --text-secondary: #94a3b8;
      --text-tertiary: #64748b;
      --accent-primary: #a855f7;
      --accent-secondary: #e9d5ff;
      --success: #10b981;
      --danger: #ef4444;
      --warning: #f59e0b;
      --radius-sm: 12px;
      --radius-md: 16px;
      --radius-lg: 20px;
      --nav-height: 70px;
    }

    html, body {
      margin: 0;
      padding: 0;
      min-height: 100vh;
      overscroll-behavior: none;
    }

    body {
      background: radial-gradient(circle at top, #4c1d95 0, #020617 45%, #000 100%);
      color: var(--text-primary);
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", system-ui, sans-serif;
      position: relative;
    }

    body::before {
      content: "";
      position: fixed;
      inset: 0;
      background: 
        radial-gradient(circle at 20% 50%, rgba(168, 85, 247, 0.08) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(236, 252, 203, 0.05) 0%, transparent 50%);
      animation: nebulaDrift 15s ease-in-out infinite;
      pointer-events: none;
    }

    @keyframes nebulaDrift {
      0%, 100% {
        opacity: 0.4;
        transform: translate(0, 0) scale(1);
      }
      50% {
        opacity: 0.7;
        transform: translate(20px, -20px) scale(1.1);
      }
    }

    body.theme-amoled {
      background: #000000;
    }

    body.theme-nebula {
      background: radial-gradient(circle at top, #4c1d95 0, #020617 45%, #000 100%);
    }

    body.theme-soft {
      background: radial-gradient(circle at top, #111827 0, #020617 45%, #020617 100%);
    }

    /* LAYOUT */
    .app-container {
      max-width: 600px;
      margin: 0 auto;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      position: relative;
    }

    /* TOP HEADER */
    .top-header {
      padding: 20px 20px 16px 20px;
      display: flex;
      flex-direction: column;
      gap: 12px;
      position: sticky;
      top: 0;
      z-index: 100;
      backdrop-filter: blur(20px);
      background: rgba(5, 3, 20, 0.95);
      border-bottom: 1px solid var(--border);
    }

    .header-top-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .app-branding {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .app-logo-text {
      font-size: 12px;
      font-weight: 600;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: var(--text-secondary);
    }

    .page-title {
      font-size: 28px;
      font-weight: 700;
      letter-spacing: -0.03em;
      margin: 0;
      background: linear-gradient(135deg, var(--accent-secondary), var(--accent-primary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      transition: all .3s ease;
      animation: titleFadeIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    @keyframes titleFadeIn {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .page-subtitle {
      font-size: 13px;
      color: var(--text-secondary);
      margin: 4px 0 0 0;
      font-weight: 500;
    }

    .header-actions {
      display: flex;
      gap: 8px;
      align-items: center;
    }

    .icon-btn {
      width: 40px;
      height: 40px;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: var(--surface);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all .2s ease;
    }

    .icon-btn:hover {
      background: var(--surface-elevated);
      border-color: var(--border-focus);
      transform: scale(1.05);
    }

    .icon-btn svg {
      width: 20px;
      height: 20px;
      stroke: var(--text-primary);
    }

    .streak-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 8px 14px;
      background: linear-gradient(135deg, rgba(251, 146, 60, 0.15), rgba(239, 68, 68, 0.15));
      border: 1px solid rgba(251, 146, 60, 0.4);
      border-radius: 999px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: all .3s cubic-bezier(0.34, 1.56, 0.64, 1);
      position: relative;
      overflow: hidden;
    }

    .streak-badge::before {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, rgba(251, 146, 60, 0.2), rgba(239, 68, 68, 0.2));
      opacity: 0;
      transition: opacity .3s ease;
    }

    .streak-badge:hover {
      transform: scale(1.05) translateY(-1px);
      box-shadow: 0 4px 16px rgba(251, 146, 60, 0.4);
      border-color: rgba(251, 146, 60, 0.6);
    }

    .streak-badge:hover::before {
      opacity: 1;
    }

    .streak-badge svg {
      width: 16px;
      height: 16px;
      fill: #fb923c;
      filter: drop-shadow(0 0 4px rgba(251, 146, 60, 0.6));
    }

    /* HELP/FAQ BUTTON */
    .help-btn {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--accent-primary), #9333ea);
      border: 2px solid rgba(168, 85, 247, 0.4);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all .3s cubic-bezier(0.34, 1.56, 0.64, 1);
      box-shadow: 0 4px 12px rgba(168, 85, 247, 0.3);
      margin-left: 8px;
    }

    .help-btn:hover {
      transform: scale(1.1) rotate(5deg);
      box-shadow: 0 6px 20px rgba(168, 85, 247, 0.5);
    }

    .help-btn svg {
      width: 22px;
      height: 22px;
      stroke: white;
      stroke-width: 2.5;
    }

    /* FAQ MODAL */
    .faq-modal {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.85);
      backdrop-filter: blur(8px);
      z-index: 2000;
      display: none;
      align-items: center;
      justify-content: center;
      padding: 20px;
      overflow-y: auto;
    }

    .faq-modal.active {
      display: flex;
    }

    .faq-content {
      background: var(--surface);
      border: 2px solid var(--accent-primary);
      border-radius: var(--radius-lg);
      max-width: 700px;
      width: 100%;
      max-height: 85vh;
      overflow-y: auto;
      box-shadow: 0 20px 60px rgba(168, 85, 247, 0.4);
      animation: faqSlideIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    @keyframes faqSlideIn {
      from {
        opacity: 0;
        transform: translateY(30px) scale(0.95);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    .faq-header {
      padding: 24px;
      border-bottom: 2px solid var(--border);
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: linear-gradient(135deg, rgba(168, 85, 247, 0.1), rgba(236, 72, 153, 0.1));
    }

    .faq-title {
      font-size: 24px;
      font-weight: 700;
      margin: 0;
      background: linear-gradient(135deg, var(--accent-secondary), var(--accent-primary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .faq-close {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: rgba(239, 68, 68, 0.2);
      border: 1px solid rgba(239, 68, 68, 0.4);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all .2s ease;
    }

    .faq-close:hover {
      background: rgba(239, 68, 68, 0.3);
      transform: scale(1.1);
    }

    .faq-close svg {
      width: 20px;
      height: 20px;
      stroke: #ef4444;
      stroke-width: 2.5;
    }

    .faq-body {
      padding: 24px;
    }

    .faq-section {
      margin-bottom: 28px;
    }

    .faq-section:last-child {
      margin-bottom: 0;
    }

    .faq-section-title {
      font-size: 18px;
      font-weight: 700;
      color: var(--accent-secondary);
      margin: 0 0 12px 0;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .faq-section-title svg {
      width: 20px;
      height: 20px;
      stroke: var(--accent-primary);
      flex-shrink: 0;
    }

    .faq-item {
      margin-bottom: 16px;
      padding: 16px;
      background: rgba(15, 23, 42, 0.5);
      border-radius: var(--radius-md);
      border: 1px solid var(--border);
      transition: all .2s ease;
    }

    .faq-item:hover {
      border-color: rgba(168, 85, 247, 0.4);
      background: rgba(15, 23, 42, 0.7);
    }

    .faq-question {
      font-size: 15px;
      font-weight: 600;
      color: var(--text-primary);
      margin: 0 0 8px 0;
    }

    .faq-answer {
      font-size: 14px;
      color: var(--text-secondary);
      line-height: 1.6;
      margin: 0;
    }

    .faq-answer strong {
      color: var(--accent-primary);
      font-weight: 600;
    }

    .faq-tip {
      background: linear-gradient(135deg, rgba(168, 85, 247, 0.15), rgba(236, 72, 153, 0.15));
      border: 1px solid rgba(168, 85, 247, 0.3);
      border-radius: var(--radius-md);
      padding: 12px 16px;
      margin-top: 8px;
      font-size: 13px;
      color: var(--accent-secondary);
      font-style: italic;
    }

    /* MAIN CONTENT AREA */
    .page-content {
      flex: 1;
      padding: 0 0 calc(var(--nav-height) + 20px) 0;
      overflow-y: auto;
    }

    .content-section {
      padding: 20px;
    }

    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }

    .section-title {
      font-size: 18px;
      font-weight: 600;
      margin: 0;
      color: var(--text-primary);
    }

    .section-action {
      font-size: 14px;
      color: var(--accent-primary);
      cursor: pointer;
      font-weight: 500;
    }

    /* PAGES */
    .page {
      display: none;
      animation: pageSlideIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    .page.active {
      display: block;
    }

    @keyframes pageSlideIn {
      from {
        opacity: 0;
        transform: translateX(20px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    /* WORKOUT PAGE */
    .workout-hero {
      background: linear-gradient(135deg, rgba(168, 85, 247, 0.15), rgba(15, 23, 42, 0.9));
      border: 1px solid rgba(168, 85, 247, 0.3);
      border-radius: var(--radius-lg);
      padding: 24px;
      margin-bottom: 20px;
    }

    .weekly-calendar {
      display: flex;
      justify-content: space-between;
      gap: 6px;
      margin-bottom: 16px;
      padding-bottom: 16px;
      border-bottom: 1px solid var(--border);
    }

    .day-cell {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 6px;
      padding: 8px 4px;
      border-radius: var(--radius-sm);
      background: rgba(15, 23, 42, 0.5);
      border: 1px solid var(--border);
      transition: all .2s ease;
      cursor: pointer;
    }

    .day-cell:hover {
      border-color: rgba(168, 85, 247, 0.5);
      transform: translateY(-2px);
    }

    .day-cell.today {
      background: linear-gradient(135deg, rgba(168, 85, 247, 0.2), rgba(15, 23, 42, 0.8));
      border-color: var(--accent-primary);
      box-shadow: 0 0 12px rgba(168, 85, 247, 0.4);
    }

    .day-cell.training-day {
      background: linear-gradient(135deg, rgba(16, 185, 129, 0.15), rgba(15, 23, 42, 0.8));
      border-color: rgba(16, 185, 129, 0.4);
    }

    .day-cell.rest-day {
      opacity: 0.5;
    }

    .day-label {
      font-size: 10px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--text-secondary);
    }

    .day-cell.today .day-label {
      color: var(--accent-primary);
    }

    .day-number {
      font-size: 16px;
      font-weight: 700;
      color: var(--text-primary);
    }

    .day-indicator {
      width: 4px;
      height: 4px;
      border-radius: 50%;
      background: var(--success);
    }

    .day-cell.rest-day .day-indicator {
      display: none;
    }

    .workout-hero-title {
      font-size: 14px;
      color: var(--text-secondary);
      margin: 0 0 8px 0;
    }

    .workout-hero-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 12px;
    }

    .edit-workout-btn {
      padding: 6px 12px;
      border-radius: var(--radius-sm);
      border: 1px solid var(--border);
      background: rgba(15, 23, 42, 0.8);
      color: var(--text-secondary);
      font-size: 12px;
      font-weight: 500;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 6px;
      transition: all .2s ease;
    }

    .edit-workout-btn:hover {
      border-color: var(--accent-primary);
      color: var(--text-primary);
      background: rgba(168, 85, 247, 0.1);
      transform: translateY(-1px);
    }

    .edit-workout-btn svg {
      width: 14px;
      height: 14px;
    }

    .workout-hero-main {
      font-size: 24px;
      font-weight: 700;
      margin: 0 0 12px 0;
    }

    .workout-hero-summary {
      font-size: 14px;
      color: var(--text-secondary);
      margin-bottom: 16px;
      line-height: 1.5;
    }

    .pill-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 16px;
    }

    .pill {
      padding: 6px 12px;
      border-radius: 999px;
      border: 1px solid rgba(168, 85, 247, 0.3);
      font-size: 12px;
      color: var(--text-secondary);
      background: rgba(15,23,42,0.5);
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition: all .2s ease;
    }

    .pill:hover {
      border-color: var(--accent-primary);
      color: var(--text-primary);
      transform: translateY(-1px);
    }

    .main-lift-card {
      border-radius: var(--radius-md);
      padding: 16px;
      background: linear-gradient(135deg, rgba(129,140,248,0.2), rgba(15,23,42,0.9));
      border: 1px solid rgba(191,219,254,0.4);
      margin-bottom: 20px;
    }

    .main-lift-label {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--text-secondary);
      display: block;
      margin-bottom: 6px;
    }

    .main-lift-name {
      font-size: 18px;
      font-weight: 600;
    }

    /* EXERCISE CARDS */
    .exercise-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin-bottom: 20px;
    }

    .exercise-card {
      border-radius: var(--radius-md);
      padding: 16px;
      background: var(--surface);
      border: 1px solid var(--border);
      transition: all .3s cubic-bezier(0.34, 1.56, 0.64, 1);
      cursor: pointer;
    }

    .exercise-card:hover {
      border-color: rgba(168,85,247,0.5);
      background: var(--surface-elevated);
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
    }

    .exercise-card.completed {
      border-color: var(--success);
      background: rgba(16, 185, 129, 0.05);
    }

    .exercise-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 16px;
      padding-bottom: 12px;
      border-bottom: 1px solid rgba(148, 163, 184, 0.1);
    }

    .exercise-name {
      font-size: 16px;
      font-weight: 600;
      margin: 0 0 6px 0;
      line-height: 1.4;
    }

    .exercise-target {
      font-size: 13px;
      color: var(--text-secondary);
      margin: 0;
      line-height: 1.6;
      padding-left: 28px;
    }

    .exercise-inputs {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .input-group {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .input-label {
      font-size: 11px;
      color: var(--text-secondary);
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .exercise-input {
      padding: 10px 12px;
      border-radius: var(--radius-sm);
      border: 1px solid var(--border);
      background: rgba(15,23,42,0.5);
      color: var(--text-primary);
      font-size: 14px;
      transition: all .2s ease;
      width: 100%;
    }

    .exercise-input:focus {
      outline: none;
      border-color: var(--accent-primary);
      box-shadow: 0 0 0 2px rgba(168, 85, 247, 0.2);
      background: rgba(15,23,42,0.7);
    }

    .exercise-input:hover {
      border-color: rgba(168, 85, 247, 0.4);
    }

    .set-row {
      display: flex;
      gap: 8px;
      align-items: center;
    }

    .set-row > div:first-child {
      font-size: 12px;
      font-weight: 600;
      color: var(--text-secondary);
      min-width: 45px;
    }

    /* PRIMARY BUTTON */
    .btn-primary {
      width: 100%;
      padding: 16px;
      border: none;
      border-radius: var(--radius-md);
      background: linear-gradient(135deg, var(--accent-secondary), var(--accent-primary));
      color: #000;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all .3s cubic-bezier(0.34, 1.56, 0.64, 1);
      box-shadow: 0 4px 12px rgba(168, 85, 247, 0.4);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(168, 85, 247, 0.6);
    }

    .btn-primary:active {
      transform: translateY(0);
    }

    .btn-primary:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none !important;
    }

    .btn-primary svg {
      width: 20px;
      height: 20px;
      stroke: #000;
      fill: none;
    }

    /* COMPLETION BAR */
    .completion-section {
      margin-top: 16px;
      padding: 16px;
      background: rgba(15,23,42,0.5);
      border-radius: var(--radius-md);
      border: 1px solid var(--border);
    }

    .completion-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
      font-size: 14px;
    }

    .completion-label {
      font-weight: 600;
    }

    .completion-count {
      color: var(--text-secondary);
      font-size: 13px;
    }

    .completion-bar {
      position: relative;
      width: 100%;
      height: 6px;
      border-radius: 999px;
      background: rgba(15,23,42,0.9);
      overflow: hidden;
    }

    .completion-fill {
      position: absolute;
      inset: 0;
      width: 0%;
      border-radius: inherit;
      background: linear-gradient(90deg, #e5e7eb, #f9fafb);
      box-shadow: 0 0 12px rgba(248,250,252,0.7);
      transition: width .6s cubic-bezier(0.34, 1.56, 0.64, 1);
      animation: pulse-glow 2s ease-in-out infinite;
    }

    @keyframes pulse-glow {
      0%, 100% {
        box-shadow: 0 0 12px rgba(248,250,252,0.7);
      }
      50% {
        box-shadow: 0 0 20px rgba(248,250,252,0.95);
      }
    }

    /* REST DAY */
    .rest-day-card {
      text-align: center;
      padding: 40px 20px;
      background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(15, 23, 42, 0.5));
      border: 1px solid rgba(16, 185, 129, 0.3);
      border-radius: var(--radius-lg);
    }

    .rest-day-icon {
      font-size: 48px;
      margin-bottom: 16px;
    }

    .rest-day-title {
      font-size: 24px;
      font-weight: 700;
      margin: 0 0 12px 0;
    }

    .rest-day-description {
      font-size: 14px;
      color: var(--text-secondary);
      line-height: 1.6;
    }

    /* GOAL PAGE */
    .goal-card {
      border-radius: var(--radius-md);
      padding: 20px;
      background: var(--surface);
      border: 1px solid var(--border);
      margin-bottom: 12px;
      cursor: pointer;
      transition: all .3s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    .goal-card.active {
      border-color: var(--accent-primary);
      background: linear-gradient(135deg, rgba(168, 85, 247, 0.15), var(--surface));
      box-shadow: 0 4px 16px rgba(168, 85, 247, 0.3);
    }

    .goal-card:hover {
      border-color: rgba(168, 85, 247, 0.5);
      transform: translateY(-2px);
    }

    .goal-title {
      font-size: 18px;
      font-weight: 600;
      margin: 0 0 8px 0;
    }

    .goal-meta {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.5;
    }

    .env-pills {
      display: flex;
      gap: 8px;
      margin-top: 12px;
    }

    .env-pill {
      flex: 1;
      padding: 10px;
      border-radius: var(--radius-sm);
      border: 1px solid var(--border);
      background: rgba(15,23,42,0.5);
      font-size: 13px;
      text-align: center;
      cursor: pointer;
      transition: all .2s ease;
    }

    .env-pill.active {
      border-color: var(--accent-primary);
      background: rgba(168, 85, 247, 0.2);
      color: var(--text-primary);
    }

    .env-pill:hover {
      border-color: rgba(168, 85, 247, 0.5);
      transform: translateY(-1px);
    }

    /* DIET PAGE */
    .diet-block {
      margin-bottom: 20px;
    }

    .diet-block-title {
      font-size: 16px;
      font-weight: 600;
      margin: 0 0 12px 0;
    }

    .diet-items {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .diet-item {
      padding: 12px;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      font-size: 14px;
      color: var(--text-secondary);
      transition: all .2s ease;
    }

    .diet-item:hover {
      border-color: rgba(168, 85, 247, 0.5);
      background: var(--surface-elevated);
      transform: translateX(4px);
    }

    .diet-item::before {
      content: "â€¢ ";
      color: var(--accent-primary);
      font-weight: 700;
    }

    /* HISTORY PAGE */
    .history-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .history-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      padding: 16px;
      cursor: pointer;
      transition: all .3s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    .history-card:hover {
      border-color: var(--border-focus);
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
    }

    .history-date {
      font-size: 12px;
      color: var(--text-tertiary);
      margin-bottom: 8px;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .history-workout {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .history-stats {
      display: flex;
      gap: 12px;
      font-size: 13px;
      color: var(--text-secondary);
      flex-wrap: wrap;
    }

    .history-stat {
      display: flex;
      align-items: center;
      gap: 4px;
    }

    /* EMPTY STATE */
    .empty-state {
      text-align: center;
      padding: 60px 20px;
    }

    .empty-icon {
      font-size: 48px;
      margin-bottom: 16px;
      opacity: 0.3;
    }

    .empty-title {
      font-size: 18px;
      font-weight: 600;
      margin: 0 0 8px 0;
    }

    .empty-description {
      font-size: 14px;
      color: var(--text-secondary);
      line-height: 1.6;
    }

    /* SAVE CONFIRMATION TOAST */
    .save-toast {
      position: fixed;
      top: 100px;
      left: 50%;
      transform: translateX(-50%) translateY(-20px);
      background: linear-gradient(135deg, rgba(16, 185, 129, 0.95), rgba(5, 150, 105, 0.95));
      color: white;
      padding: 16px 24px;
      border-radius: var(--radius-md);
      display: flex;
      align-items: center;
      gap: 12px;
      font-size: 15px;
      font-weight: 600;
      box-shadow: 0 8px 32px rgba(16, 185, 129, 0.4);
      border: 1px solid rgba(16, 185, 129, 0.6);
      opacity: 0;
      pointer-events: none;
      z-index: 1000;
      transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    .save-toast.show {
      opacity: 1;
      transform: translateX(-50%) translateY(0);
    }

    .save-toast svg {
      width: 20px;
      height: 20px;
      stroke: white;
      stroke-width: 2.5;
    }

    /* SETTINGS SAVE BUTTON */
    .settings-save-btn {
      width: 100%;
      padding: 16px;
      background: linear-gradient(135deg, var(--accent-primary), #9333ea);
      color: white;
      border: none;
      border-radius: var(--radius-md);
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-top: 8px;
      box-shadow: 0 4px 16px rgba(168, 85, 247, 0.3);
    }

    .settings-save-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 24px rgba(168, 85, 247, 0.5);
    }

    .settings-save-btn:active {
      transform: translateY(0);
    }

    /* MOTIVATION BANNER */
    .motivation-banner {
      margin: 24px 0;
      padding: 28px 28px;
      background: linear-gradient(135deg, rgba(168, 85, 247, 0.2), rgba(236, 72, 153, 0.2), rgba(251, 146, 60, 0.15));
      border: 2px solid rgba(168, 85, 247, 0.5);
      border-radius: var(--radius-lg);
      position: relative;
      overflow: hidden;
      box-shadow: 0 8px 32px rgba(168, 85, 247, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.1);
      animation: bannerGlow 4s ease-in-out infinite;
    }

    @keyframes bannerGlow {
      0%, 100% {
        box-shadow: 0 8px 32px rgba(168, 85, 247, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.1);
      }
      50% {
        box-shadow: 0 8px 48px rgba(168, 85, 247, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.15);
      }
    }

    .motivation-banner::before {
      content: "";
      position: absolute;
      top: -50%;
      right: -10%;
      width: 250px;
      height: 250px;
      background: radial-gradient(circle, rgba(168, 85, 247, 0.2), transparent);
      border-radius: 50%;
      animation: motivationPulse 4s ease-in-out infinite;
    }

    @keyframes motivationPulse {
      0%, 100% {
        transform: scale(1);
        opacity: 0.6;
      }
      50% {
        transform: scale(1.3);
        opacity: 1;
      }
    }

    .motivation-icon {
      font-size: 42px;
      margin-bottom: 12px;
      display: block;
      animation: motivationBounce 2.5s ease-in-out infinite;
      filter: drop-shadow(0 4px 12px rgba(168, 85, 247, 0.6));
    }

    @keyframes motivationBounce {
      0%, 100% {
        transform: translateY(0) rotate(0deg) scale(1);
      }
      25% {
        transform: translateY(-8px) rotate(-8deg) scale(1.05);
      }
      75% {
        transform: translateY(-8px) rotate(8deg) scale(1.05);
      }
    }

    .motivation-text {
      font-size: 19px;
      font-weight: 700;
      line-height: 1.6;
      color: var(--text-primary);
      position: relative;
      z-index: 1;
      text-shadow: 0 2px 12px rgba(0, 0, 0, 0.4);
      letter-spacing: -0.01em;
    }

    .motivation-author {
      font-size: 13px;
      color: var(--accent-secondary);
      margin-top: 10px;
      font-style: italic;
      font-weight: 600;
      position: relative;
      z-index: 1;
      text-shadow: 0 1px 4px rgba(0, 0, 0, 0.3);
    }

    /* WORKOUT TYPE BADGES */
    .workout-type-badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 14px;
      background: rgba(168, 85, 247, 0.15);
      border: 1px solid rgba(168, 85, 247, 0.3);
      border-radius: 999px;
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 12px;
    }

    .workout-type-badge svg {
      width: 18px;
      height: 18px;
      flex-shrink: 0;
    }

    .workout-type-badge.push {
      background: rgba(239, 68, 68, 0.15);
      border-color: rgba(239, 68, 68, 0.3);
      color: #fca5a5;
    }

    .workout-type-badge.pull {
      background: rgba(59, 130, 246, 0.15);
      border-color: rgba(59, 130, 246, 0.3);
      color: #93c5fd;
    }

    .workout-type-badge.legs {
      background: rgba(16, 185, 129, 0.15);
      border-color: rgba(16, 185, 129, 0.3);
      color: #6ee7b7;
    }

    .workout-type-badge.cardio {
      background: rgba(251, 146, 60, 0.15);
      border-color: rgba(251, 146, 60, 0.3);
      color: #fdba74;
    }

    .workout-type-badge.fullbody {
      background: rgba(168, 85, 247, 0.15);
      border-color: rgba(168, 85, 247, 0.3);
      color: #c4b5fd;
    }

    .workout-type-badge.upper {
      background: rgba(244, 114, 182, 0.15);
      border-color: rgba(244, 114, 182, 0.3);
      color: #f9a8d4;
    }

    .workout-type-badge.lower {
      background: rgba(34, 197, 94, 0.15);
      border-color: rgba(34, 197, 94, 0.3);
      color: #86efac;
    }

    .workout-type-badge.strength {
      background: rgba(220, 38, 38, 0.15);
      border-color: rgba(220, 38, 38, 0.3);
      color: #fca5a5;
    }

    .workout-type-badge.core {
      background: rgba(245, 158, 11, 0.15);
      border-color: rgba(245, 158, 11, 0.3);
      color: #fcd34d;
    }

    .workout-type-badge.balanced {
      background: rgba(139, 92, 246, 0.15);
      border-color: rgba(139, 92, 246, 0.3);
      color: #c4b5fd;
    }

    .workout-type-badge.compound {
      background: rgba(20, 184, 166, 0.15);
      border-color: rgba(20, 184, 166, 0.3);
      color: #5eead4;
    }

    .workout-type-badge.functional {
      background: rgba(99, 102, 241, 0.15);
      border-color: rgba(99, 102, 241, 0.3);
      color: #a5b4fc;
    }

    /* BOTTOM NAVIGATION */
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      height: var(--nav-height);
      background: rgba(5, 3, 20, 0.95);
      backdrop-filter: blur(20px);
      border-top: 1px solid var(--border);
      display: flex;
      justify-content: space-around;
      align-items: center;
      z-index: 100;
      padding: 0 20px;
    }

    .nav-item {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
      cursor: pointer;
      padding: 8px;
      border-radius: 12px;
      transition: all .2s ease;
      position: relative;
    }

    .nav-item:hover {
      background: rgba(168, 85, 247, 0.1);
    }

    .nav-item.active {
      color: var(--accent-primary);
    }

    .nav-item.active::before {
      content: "";
      position: absolute;
      top: -1px;
      left: 50%;
      transform: translateX(-50%);
      width: 40px;
      height: 3px;
      background: var(--accent-primary);
      border-radius: 0 0 3px 3px;
      box-shadow: 0 0 12px var(--accent-primary);
    }

    .nav-icon {
      width: 24px;
      height: 24px;
      stroke: var(--text-secondary);
      fill: none;
      transition: all .2s ease;
    }

    .nav-item.active .nav-icon {
      stroke: var(--accent-primary);
      transform: scale(1.1);
    }

    .nav-label {
      font-size: 11px;
      font-weight: 500;
      color: var(--text-secondary);
      transition: color .2s ease;
    }

    .nav-item.active .nav-label {
      color: var(--accent-primary);
    }

    /* ONBOARDING */
    .onboarding-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.9);
      backdrop-filter: blur(4px);
      z-index: 1000;
      display: none;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    .onboarding-overlay.active {
      display: flex;
    }

    .onboarding-modal {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      padding: 32px;
      max-width: 500px;
      width: 100%;
      max-height: 80vh;
      overflow-y: auto;
    }

    .onboarding-title {
      font-size: 24px;
      font-weight: 700;
      margin: 0 0 8px 0;
    }

    .onboarding-subtitle {
      font-size: 14px;
      color: var(--text-secondary);
      margin-bottom: 24px;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-label {
      display: block;
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .form-input,
    .form-select {
      width: 100%;
      padding: 12px;
      border-radius: var(--radius-sm);
      border: 1px solid var(--border);
      background: rgba(15,23,42,0.5);
      color: var(--text-primary);
      font-size: 14px;
      transition: all .2s ease;
    }

    .form-input:focus,
    .form-select:focus {
      outline: none;
      border-color: var(--accent-primary);
      box-shadow: 0 0 0 2px rgba(168, 85, 247, 0.2);
    }

    .equipment-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
      gap: 8px;
      margin-top: 8px;
    }

    .equip-pill {
      padding: 10px;
      border-radius: var(--radius-sm);
      border: 1px solid var(--border);
      background: rgba(15,23,42,0.5);
      font-size: 12px;
      text-align: center;
      cursor: pointer;
      transition: all .2s ease;
    }

    .equip-pill.active {
      border-color: var(--accent-primary);
      background: rgba(168, 85, 247, 0.2);
      color: var(--text-primary);
    }

    .equip-pill:hover {
      border-color: rgba(168, 85, 247, 0.5);
      transform: translateY(-1px);
    }

    .form-help {
      font-size: 12px;
      color: var(--text-secondary);
      margin-top: 8px;
      line-height: 1.5;
    }

    /* CONFETTI */
    .celebrate-layer {
      pointer-events: none;
      position: fixed;
      inset: 0;
      overflow: visible;
      z-index: 40;
    }

    .dumbbell-confetti {
      position: absolute;
      width: 26px;
      height: 26px;
      opacity: 0;
      animation: dumbbell-pop 1500ms ease-out forwards;
    }

    @keyframes dumbbell-pop {
      0% {
        transform: translate3d(0, 20px, 0) scale(0.8) rotate(0deg);
        opacity: 0;
      }
      15% {
        opacity: 1;
        transform: translate3d(0, 10px, 0) scale(1.1) rotate(8deg);
      }
      30% {
        transform: translate3d(calc(var(--dx) * 0.4), calc(var(--dy) * 0.4), 0) scale(1.05) rotate(-5deg);
      }
      50% {
        transform: translate3d(calc(var(--dx) * 0.7), calc(var(--dy) * 0.7), 0) scale(1.02) rotate(14deg);
      }
      70% {
        transform: translate3d(var(--dx), var(--dy), 0) scale(1.02) rotate(18deg);
        opacity: 1;
      }
      85% {
        transform: translate3d(calc(var(--dx) * 1.08), calc(var(--dy) * 1.1 + 20px), 0) scale(0.95) rotate(10deg);
        opacity: 0.6;
      }
      100% {
        transform: translate3d(calc(var(--dx) * 1.15), calc(var(--dy) * 1.25 + 40px), 0) scale(0.85) rotate(-4deg);
        opacity: 0;
      }
    }

    /* SETTINGS PAGE */
    .settings-list {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .setting-item {
      background: var(--surface);
      padding: 16px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      cursor: pointer;
      transition: all .2s ease;
      border-bottom: 1px solid var(--border);
    }

    .setting-item:first-child {
      border-radius: var(--radius-md) var(--radius-md) 0 0;
    }

    .setting-item:last-child {
      border-radius: 0 0 var(--radius-md) var(--radius-md);
      border-bottom: none;
    }

    .setting-item:hover {
      background: var(--surface-elevated);
    }

    .setting-label {
      font-size: 15px;
      font-weight: 500;
    }

    .setting-value {
      font-size: 14px;
      color: var(--text-secondary);
    }

    .theme-pills {
      display: flex;
      gap: 8px;
      margin-top: 12px;
    }

    .theme-pill {
      flex: 1;
      padding: 10px;
      border-radius: var(--radius-sm);
      border: 1px solid var(--border);
      background: rgba(15,23,42,0.5);
      font-size: 12px;
      text-align: center;
      cursor: pointer;
      transition: all .2s ease;
    }

    .theme-pill.active {
      border-color: var(--accent-primary);
      background: rgba(168, 85, 247, 0.2);
      color: var(--text-primary);
    }

    .theme-pill:hover {
      border-color: rgba(168, 85, 247, 0.5);
      transform: translateY(-1px);
    }

    /* RESPONSIVE */
    @media (max-width: 640px) {
      .content-section {
        padding: 16px;
      }

      .equipment-grid {
        grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
      }
    }
  </style>
</head>
<body class="theme-nebula">
  <div id="celebrate-layer" class="celebrate-layer"></div>
  
  <!-- SAVE CONFIRMATION TOAST -->
  <div class="save-toast" id="save-toast">
    <svg viewBox="0 0 24 24" fill="none">
      <path d="M5 13l4 4L19 7"/>
    </svg>
    Settings saved successfully!
  </div>
  
  <!-- ONBOARDING -->
  <div class="onboarding-overlay" id="onboarding-overlay">
    <div class="onboarding-modal">
      <h1 class="onboarding-title">Welcome to WorkoutFrenzy</h1>
      <p class="onboarding-subtitle">Let's set up your training profile</p>

      <div class="form-group">
        <label class="form-label" for="onboarding-name">Your Name</label>
        <input class="form-input" id="onboarding-name" type="text" placeholder="bright" />
      </div>

      <div class="form-group">
        <label class="form-label" for="onboarding-goal">Main Goal</label>
        <select class="form-select" id="onboarding-goal">
          <option value="lose_weight">Lose Weight</option>
          <option value="build_muscle" selected>Build Muscle</option>
          <option value="keep_fit">Keep Fit</option>
        </select>
      </div>

      <div class="form-group">
        <label class="form-label" for="onboarding-env">Where Do You Train?</label>
        <select class="form-select" id="onboarding-env">
          <option value="home">Home</option>
          <option value="gym">Gym</option>
        </select>
      </div>

      <div class="form-group">
        <label class="form-label">What Do You Have at Home?</label>
        <p class="form-help" style="margin-bottom: 12px;">Select all that apply â€” your workouts will adapt to what you have</p>
        <div class="equipment-grid" id="onboarding-equipment">
          <button type="button" class="equip-pill" data-equip="chair">Chair</button>
          <button type="button" class="equip-pill" data-equip="stairs">Stairs</button>
          <button type="button" class="equip-pill" data-equip="broomstick">Broomstick / Mop</button>
          <button type="button" class="equip-pill" data-equip="buckets">Buckets / Jugs</button>
          <button type="button" class="equip-pill" data-equip="backpack">Backpack</button>
          <button type="button" class="equip-pill" data-equip="towel">Towel</button>
          <button type="button" class="equip-pill" data-equip="water_bottles">Water Bottles</button>
          <button type="button" class="equip-pill" data-equip="sandbag">Sandbag</button>
          <button type="button" class="equip-pill" data-equip="bands">Resistance Bands</button>
          <button type="button" class="equip-pill" data-equip="dumbbells">Dumbbells</button>
          <button type="button" class="equip-pill" data-equip="kettlebell">Kettlebell</button>
          <button type="button" class="equip-pill" data-equip="none">None at All</button>
        </div>
        <p class="form-help" style="margin-top: 8px;">ðŸ’¡ The more you select, the more exercise variety you'll get. Picking "none" gives you pure bodyweight training.</p>
      </div>

      <button class="btn-primary" id="onboarding-save">
        <svg viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path d="M5 13l4 4L19 7"/>
        </svg>
        Start Training
      </button>
    </div>
  </div>

  <div class="app-container">
    <!-- TOP HEADER -->
    <header class="top-header">
      <div class="header-top-row">
        <div class="app-branding">
          <span class="app-logo-text">WorkoutFrenzy</span>
        </div>
        <div class="header-actions">
          <button class="help-btn" id="help-btn" title="Help & FAQ">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10"/>
              <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
              <line x1="12" y1="17" x2="12.01" y2="17"/>
            </svg>
          </button>
          <span class="streak-badge" id="streak-badge">
            <svg viewBox="0 0 24 24">
              <path d="M12 2c1.5 2.5 3 5.5 3 8.5 0 3.3-2.7 6-6 6s-6-2.7-6-6c0-3 1.5-6 3-8.5 0 0 1.5 2 3 2s3-2 3-2zm-3 14c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2z"/>
            </svg>
            <span id="streak-label">0 days</span>
          </span>
        </div>
      </div>
      <div>
        <h1 class="page-title" id="page-title">Workout</h1>
        <p class="page-subtitle" id="page-subtitle">Track your training</p>
      </div>
    </header>

    <!-- MAIN CONTENT -->
    <main class="page-content">
      
      <!-- WORKOUT PAGE -->
      <div class="page active" id="page-workout">
        <div class="content-section">
          <div id="workout-hero" class="workout-hero">
            <div class="weekly-calendar" id="weekly-calendar"></div>
            
            <div class="workout-hero-header">
              <div>
                <h2 class="workout-hero-title" id="workout-greeting">Good morning, Bright</h2>
              </div>
              <button class="edit-workout-btn" id="edit-workout-btn">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                  <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                </svg>
                Edit
              </button>
            </div>

            <div id="workout-type-badge"></div>
            <h1 class="workout-hero-main" id="workout-title">Today is a Training Day</h1>
            <p class="workout-hero-summary" id="workout-summary">Time to lock in and get the work done</p>
            <div class="pill-row" id="workout-muscles"></div>
          </div>

          <!-- MOTIVATION BANNER -->
          <div id="motivation-banner-container"></div>

          <div id="main-lift-section" style="display:none;">
            <div class="main-lift-card">
              <span class="main-lift-label">Today's Focus</span>
              <div class="main-lift-name" id="main-lift-name">â€”</div>
            </div>
          </div>

          <div id="rest-day-section" style="display:none;">
            <div class="rest-day-card">
              <div class="rest-day-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 48px; height: 48px;">
                  <path d="M12 2a5 5 0 0 0-5 5v3H5a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7a2 2 0 0 0-2-2h-2V7a5 5 0 0 0-5-5z" fill="currentColor" opacity="0.2"/>
                  <path d="M3 12c0-1.5 1.5-2 2-2s2 .5 2 2-1.5 2-2 2-2-.5-2-2zM19 12c0 1.5-1.5 2-2 2s-2-.5-2-2 1.5-2 2-2 2 .5 2 2z"/>
                  <circle cx="12" cy="15" r="1" fill="currentColor"/>
                </svg>
              </div>
              <h2 class="rest-day-title">Rest or Active Recovery</h2>
              <p class="rest-day-description">No programmed lifting today. Focus on light walks, mobility work, and hydration.</p>
              <button class="btn-primary" id="edit-schedule-btn" style="margin-top: 20px;">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 20px; height: 20px; display: inline-block; vertical-align: middle; margin-right: 8px;">
                  <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                  <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                </svg>
                Edit Training Days
              </button>
            </div>
          </div>

          <div id="workout-exercises-section">
            <div class="section-header">
              <h2 class="section-title">Today's Exercises</h2>
            </div>
            <div class="exercise-list" id="exercise-list"></div>
          </div>

          <div id="workout-actions" class="content-section">
            <button class="btn-primary" id="finish-workout-btn">
              <svg viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path d="M5 13l4 4L19 7"/>
              </svg>
              Finish Workout
            </button>

            <div class="completion-section">
              <div class="completion-header">
                <span class="completion-label" id="completion-label">0% complete</span>
                <span class="completion-count" id="completion-count">0 sets logged</span>
              </div>
              <div class="completion-bar">
                <div class="completion-fill" id="completion-fill"></div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- GOAL PAGE -->
      <div class="page" id="page-goal">
        <div class="content-section">
          <div class="section-header">
            <h2 class="section-title">Your Main Objective</h2>
          </div>
          <p style="font-size: 14px; color: var(--text-secondary); margin-bottom: 20px;">
            Pick what you want your body to do, then choose where you train most.
          </p>

          <div id="goal-choices"></div>

          <div class="section-header" style="margin-top: 32px;">
            <h2 class="section-title">Training Environment</h2>
          </div>
          <div class="env-pills" id="env-choices">
            <div class="env-pill" data-env="home">Train at Home</div>
            <div class="env-pill" data-env="gym">Train in Gym</div>
          </div>

          <div id="goal-info" style="margin-top: 24px; padding: 20px; background: rgba(15,23,42,0.5); border-radius: var(--radius-md); border: 1px solid var(--border);">
            <div style="font-size: 13px; color: var(--text-secondary); line-height: 1.8;" id="goal-meta"></div>
          </div>

          <div id="equipment-section" style="margin-top: 24px; display: none;">
            <div class="section-header">
              <h2 class="section-title">Home Equipment</h2>
              <span class="section-action" id="update-equipment-btn" style="cursor: pointer;">Update</span>
            </div>
            <p style="font-size: 13px; color: var(--text-secondary); margin-bottom: 16px;">
              Your workouts adapt based on what you have available
            </p>
            <div class="equipment-grid" id="equipment-display"></div>
          </div>

          <div id="gym-equipment-section" style="margin-top: 24px; display: none;">
            <div class="section-header">
              <h2 class="section-title">Gym Equipment Available</h2>
            </div>
            <p style="font-size: 13px; color: var(--text-secondary); margin-bottom: 16px;">
              Select what equipment your gym has so we can design better workouts
            </p>
            <div class="equipment-grid" id="gym-equipment-grid">
              <button type="button" class="equip-pill" data-gym-equip="barbell">Barbell</button>
              <button type="button" class="equip-pill" data-gym-equip="dumbbells">Dumbbells</button>
              <button type="button" class="equip-pill" data-gym-equip="kettlebells">Kettlebells</button>
              <button type="button" class="equip-pill" data-gym-equip="cable_machine">Cable Machine</button>
              <button type="button" class="equip-pill" data-gym-equip="smith_machine">Smith Machine</button>
              <button type="button" class="equip-pill" data-gym-equip="leg_press">Leg Press</button>
              <button type="button" class="equip-pill" data-gym-equip="squat_rack">Squat Rack</button>
              <button type="button" class="equip-pill" data-gym-equip="bench_press">Bench Press</button>
              <button type="button" class="equip-pill" data-gym-equip="pull_up_bar">Pull-Up Bar</button>
              <button type="button" class="equip-pill" data-gym-equip="dip_station">Dip Station</button>
              <button type="button" class="equip-pill" data-gym-equip="lat_pulldown">Lat Pulldown</button>
              <button type="button" class="equip-pill" data-gym-equip="rowing_machine">Rowing Machine</button>
              <button type="button" class="equip-pill" data-gym-equip="leg_curl">Leg Curl Machine</button>
              <button type="button" class="equip-pill" data-gym-equip="leg_extension">Leg Extension Machine</button>
              <button type="button" class="equip-pill" data-gym-equip="chest_fly">Chest Fly Machine</button>
              <button type="button" class="equip-pill" data-gym-equip="pec_deck">Pec Deck</button>
              <button type="button" class="equip-pill" data-gym-equip="preacher_curl">Preacher Curl Bench</button>
              <button type="button" class="equip-pill" data-gym-equip="ez_bar">EZ Curl Bar</button>
              <button type="button" class="equip-pill" data-gym-equip="trap_bar">Trap Bar</button>
              <button type="button" class="equip-pill" data-gym-equip="resistance_bands">Resistance Bands</button>
              <button type="button" class="equip-pill" data-gym-equip="medicine_balls">Medicine Balls</button>
              <button type="button" class="equip-pill" data-gym-equip="slam_balls">Slam Balls</button>
              <button type="button" class="equip-pill" data-gym-equip="battle_ropes">Battle Ropes</button>
              <button type="button" class="equip-pill" data-gym-equip="trx">TRX Straps</button>
              <button type="button" class="equip-pill" data-gym-equip="bosu_ball">Bosu Ball</button>
              <button type="button" class="equip-pill" data-gym-equip="ab_wheel">Ab Wheel</button>
              <button type="button" class="equip-pill" data-gym-equip="glute_ham">Glute Ham Raise</button>
              <button type="button" class="equip-pill" data-gym-equip="hyperextension">Hyperextension Bench</button>
              <button type="button" class="equip-pill" data-gym-equip="calf_raise">Calf Raise Machine</button>
              <button type="button" class="equip-pill" data-gym-equip="hack_squat">Hack Squat Machine</button>
              <button type="button" class="equip-pill" data-gym-equip="sissy_squat">Sissy Squat Bench</button>
              <button type="button" class="equip-pill" data-gym-equip="plyo_box">Plyo Box</button>
              <button type="button" class="equip-pill" data-gym-equip="agility_ladder">Agility Ladder</button>
              <button type="button" class="equip-pill" data-gym-equip="speed_sled">Speed Sled</button>
              <button type="button" class="equip-pill" data-gym-equip="treadmill">Treadmill</button>
              <button type="button" class="equip-pill" data-gym-equip="elliptical">Elliptical</button>
              <button type="button" class="equip-pill" data-gym-equip="stationary_bike">Stationary Bike</button>
              <button type="button" class="equip-pill" data-gym-equip="stair_climber">Stair Climber</button>
              <button type="button" class="equip-pill" data-gym-equip="assault_bike">Assault Bike</button>
              <button type="button" class="equip-pill" data-gym-equip="ski_erg">Ski Erg</button>
            </div>
          </div>

          <div class="section-header" style="margin-top: 32px;">
            <h2 class="section-title">Training Schedule</h2>
          </div>
          <p style="font-size: 13px; color: var(--text-secondary); margin-bottom: 16px;">
            Configure how many days per week you want to train
          </p>

          <div style="margin-bottom: 16px;">
            <label style="display: block; font-size: 13px; font-weight: 600; margin-bottom: 8px;">Days per Week</label>
            <div class="env-pills" id="frequency-choices">
              <div class="env-pill" data-frequency="3">3 Days</div>
              <div class="env-pill" data-frequency="4">4 Days</div>
              <div class="env-pill" data-frequency="5">5 Days</div>
              <div class="env-pill" data-frequency="6">6 Days</div>
            </div>
          </div>

          <div>
            <label style="display: block; font-size: 13px; font-weight: 600; margin-bottom: 8px;">Select Training Days</label>
            <div class="equipment-grid" id="training-days-selector">
              <button type="button" class="equip-pill" data-day="0">Sunday</button>
              <button type="button" class="equip-pill" data-day="1">Monday</button>
              <button type="button" class="equip-pill" data-day="2">Tuesday</button>
              <button type="button" class="equip-pill" data-day="3">Wednesday</button>
              <button type="button" class="equip-pill" data-day="4">Thursday</button>
              <button type="button" class="equip-pill" data-day="5">Friday</button>
              <button type="button" class="equip-pill" data-day="6">Saturday</button>
            </div>
          </div>

          <button class="settings-save-btn" id="save-settings-btn">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 20px; height: 20px;">
              <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
              <polyline points="17 21 17 13 7 13 7 21"/>
              <polyline points="7 3 7 8 15 8"/>
            </svg>
            Save Changes
          </button>
        </div>
      </div>

      <!-- DIET PAGE -->
      <div class="page" id="page-diet">
        <div class="content-section">
          <div class="section-header">
            <h2 class="section-title">Nutrition Guide</h2>
          </div>
          <div style="margin-bottom: 20px;">
            <h3 style="font-size: 18px; font-weight: 600; margin: 0 0 8px 0; text-transform: lowercase;" id="diet-title">â€”</h3>
            <p style="font-size: 14px; color: var(--text-secondary); margin-bottom: 16px;" id="diet-goal">â€”</p>
            <div class="pill-row" id="diet-pills"></div>
          </div>

          <div id="diet-blocks"></div>
        </div>
      </div>

      <!-- HISTORY PAGE -->
      <div class="page" id="page-history">
        <div class="content-section">
          <div class="section-header">
            <h2 class="section-title">Workout History</h2>
          </div>
          <div class="history-list" id="history-list">
            <div class="empty-state">
              <div class="empty-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 48px; height: 48px;">
                  <path d="M3 3v18h18"/>
                  <path d="M18 17V9l-5 5-3-3-4 4" stroke-width="2.5"/>
                  <circle cx="18" cy="9" r="1.5" fill="currentColor"/>
                </svg>
              </div>
              <h3 class="empty-title">No Workouts Yet</h3>
              <p class="empty-description">Finish your first workout to see it here!</p>
            </div>
          </div>
        </div>
      </div>

    </main>

    <!-- BOTTOM NAVIGATION -->
    <nav class="bottom-nav">
      <div class="nav-item active" data-page="workout">
        <svg class="nav-icon" viewBox="0 0 24 24" stroke-width="2">
          <path d="M7 5v3H4v8h3v3h2v-3h6v3h2v-3h3V8h-3V5h-2v3H9V5H7zm-1 5h12v4H6v-4z"/>
        </svg>
        <span class="nav-label">Workout</span>
      </div>

      <div class="nav-item" data-page="goal">
        <svg class="nav-icon" viewBox="0 0 24 24" stroke-width="2">
          <path d="M12 2l7 4v5c0 5-3 9-7 11-4-2-7-6-7-11V6l7-4z"/>
        </svg>
        <span class="nav-label">Goal</span>
      </div>

      <div class="nav-item" data-page="diet">
        <svg class="nav-icon" viewBox="0 0 24 24" stroke-width="2">
          <path d="M12 2C9 4 6 7.5 6 11a6 6 0 0 0 12 0c0-3.5-3-7-6-9z"/>
        </svg>
        <span class="nav-label">Diet</span>
      </div>

      <div class="nav-item" data-page="history">
        <svg class="nav-icon" viewBox="0 0 24 24" stroke-width="2">
          <circle cx="12" cy="12" r="10"/>
          <polyline points="12 6 12 12 16 14"/>
        </svg>
        <span class="nav-label">History</span>
      </div>
    </nav>

  </div>

  <script>
    // GOALS DATA
    var GOALS = {
      lose_weight: {
        key: "lose_weight",
        label: "Lose Weight",
        frequency: "3 to 5 days per week",
        focus: "Calorie burn with joint-friendly options",
        defaultEnvironment: "home",
        homePlanId: "lw_home",
        gymPlanId: "lw_gym"
      },
      build_muscle: {
        key: "build_muscle",
        label: "Build Muscle",
        frequency: "4 days per week",
        focus: "Progressive overload and protein",
        defaultEnvironment: "gym",
        homePlanId: "bm_home",
        gymPlanId: "bm_gym"
      },
      keep_fit: {
        key: "keep_fit",
        label: "Keep Fit",
        frequency: "3 days per week",
        focus: "Mobility, strength and cardio balance",
        defaultEnvironment: "home",
        homePlanId: "kf_home",
        gymPlanId: "kf_gym"
      }
    };

    // SNARKY MOTIVATIONAL MESSAGES
    var MOTIVATIONS = [
      { text: "Your bed called. It said stop being so dramatic and just work out.", icon: "ðŸ›ï¸" },
      { text: "Complaining burns zero calories. Burpees burn a lot. Choose wisely.", icon: "ðŸ”¥" },
      { text: "That 'maybe tomorrow' you keep saying? Tomorrow laughed and said good luck.", icon: "ðŸ˜‚" },
      { text: "Consistency is showing up when the hype is gone. So... where's your excuse now?", icon: "ðŸ¤¨" },
      { text: "Your future self just sent a text: 'Please don't embarrass me today.'", icon: "ðŸ“²" },
      { text: "Nobody gets abs by thinking about abs. Get moving.", icon: "ðŸ§ " },
      { text: "The only workout you'll regret is the one you skipped. This ain't that one.", icon: "â°" },
      { text: "Your comfort zone is comfy. It's also where progress goes to die.", icon: "â˜ ï¸" },
      { text: "Soreness is just weakness leaving the body. Or you overdid it. Probably both.", icon: "ðŸ’Š" },
      { text: "If it was easy, everyone would do it. But you're not everyone, are you?", icon: "ðŸŽ¯" },
      { text: "Your playlist is fire. Your effort should match it.", icon: "ðŸŽµ" },
      { text: "Stop refreshing your social media. Refresh your energy and lift something heavy.", icon: "ðŸ“±" },
      { text: "Excuses are like opinions: everybody's got them, nobody wants to hear them.", icon: "ðŸ™„" },
      { text: "You can feel sore tomorrow or feel sorry tomorrow. Pick one.", icon: "ðŸ’­" },
      { text: "The iron doesn't care about your bad day. It just wants to be lifted.", icon: "ðŸ‹ï¸" },
      { text: "You're one workout away from a better mood. Or one excuse away from regret.", icon: "ðŸ˜¤" },
      { text: "Rome wasn't built in a day, but they worked on it every day. So should you.", icon: "ðŸ›ï¸" },
      { text: "Discipline is doing what needs to be done even when you'd rather scroll TikTok.", icon: "âš”ï¸" },
      { text: "Your ancestors hunted mammoths for survival. You can do some push-ups for biceps.", icon: "ðŸ¦£" },
      { text: "Champions aren't made in the gym. But they sure don't skip leg day either.", icon: "ðŸ‘‘" }
    ];

    // EQUIPMENT TO EXERCISES MAPPING
    var EQUIPMENT_EXERCISES = {
      chair: [
        { name: "incline pushups (on chair)", target: "3 x 10-12", muscle: "chest" },
        { name: "chair dips", target: "3 x 8-12", muscle: "triceps" },
        { name: "box squats (to chair)", target: "3 x 12-15", muscle: "legs" },
        { name: "split squats (rear foot on chair)", target: "3 x 10 each leg", muscle: "legs" },
        { name: "seated shoulder press (with jug)", target: "3 x 10-12", muscle: "shoulders" },
        { name: "seated curls (with jug)", target: "3 x 12-15", muscle: "biceps" }
      ],
      stairs: [
        { name: "stair march", target: "3 x 2 minutes", muscle: "cardio" },
        { name: "stair calf raises", target: "3 x 15-20", muscle: "calves" },
        { name: "stair step-ups", target: "3 x 12 each leg", muscle: "legs" },
        { name: "stair lunge climbs", target: "3 x 10 each leg", muscle: "legs" },
        { name: "stair sprints", target: "5-8 rounds", muscle: "cardio" }
      ],
      broomstick: [
        { name: "broomstick RDL", target: "3 x 12-15", muscle: "hamstrings" },
        { name: "broomstick rows", target: "3 x 12-15", muscle: "back" },
        { name: "broomstick overhead press", target: "3 x 12-15", muscle: "shoulders" },
        { name: "broomstick front squats", target: "3 x 12-15", muscle: "legs" },
        { name: "broomstick mobility drills", target: "2 x 10", muscle: "mobility" }
      ],
      buckets: [
        { name: "goblet squat (jug)", target: "4 x 10-12", muscle: "legs" },
        { name: "bent-over rows (jug)", target: "3 x 10-12", muscle: "back" },
        { name: "farmer carry (2 jugs)", target: "3 x 30-40 seconds", muscle: "grip" },
        { name: "romanian deadlift (jug)", target: "3 x 12-15", muscle: "hamstrings" },
        { name: "bicep curls (jug)", target: "3 x 12-15", muscle: "biceps" },
        { name: "overhead press (jug)", target: "3 x 10-12", muscle: "shoulders" },
        { name: "lunges (jug)", target: "3 x 10 each leg", muscle: "legs" }
      ],
      backpack: [
        { name: "weighted pushups (backpack)", target: "3 x 8-12", muscle: "chest" },
        { name: "weighted squats (backpack)", target: "4 x 10-12", muscle: "legs" },
        { name: "weighted lunges (backpack)", target: "3 x 10 each leg", muscle: "legs" },
        { name: "backpack good mornings", target: "3 x 12-15", muscle: "hamstrings" },
        { name: "weighted carries (backpack)", target: "3 x 40 seconds", muscle: "core" }
      ],
      towel: [
        { name: "hamstring sliders (towel)", target: "3 x 10-12", muscle: "hamstrings" },
        { name: "plank drags (towel)", target: "3 x 8-10", muscle: "core" },
        { name: "towel rows (isometric)", target: "3 x 12 seconds", muscle: "back" },
        { name: "gliding leg curls (towel)", target: "3 x 10-12", muscle: "hamstrings" }
      ],
      water_bottles: [
        { name: "lateral raises (bottles)", target: "3 x 12-15", muscle: "shoulders" },
        { name: "front raises (bottles)", target: "3 x 12-15", muscle: "shoulders" },
        { name: "overhead press (bottles)", target: "3 x 10-12", muscle: "shoulders" },
        { name: "bottle curls", target: "3 x 12-15", muscle: "biceps" }
      ],
      sandbag: [
        { name: "sandbag cleans", target: "4 x 6-8", muscle: "fullbody" },
        { name: "sandbag shoulder-to-shoulder", target: "3 x 10-12", muscle: "shoulders" },
        { name: "sandbag front squat", target: "3 x 10-12", muscle: "legs" },
        { name: "sandbag RDL", target: "3 x 12-15", muscle: "hamstrings" },
        { name: "sandbag carry", target: "3 x 40 seconds", muscle: "grip" }
      ],
      bands: [
        { name: "band rows", target: "3 x 12-15", muscle: "back" },
        { name: "band face pulls", target: "3 x 15-20", muscle: "back" },
        { name: "band pull-aparts", target: "3 x 15-20", muscle: "back" },
        { name: "band curls", target: "3 x 12-15", muscle: "biceps" },
        { name: "band tricep extensions", target: "3 x 12-15", muscle: "triceps" },
        { name: "band hip abductions", target: "3 x 15-20", muscle: "glutes" }
      ],
      dumbbells: [
        { name: "dumbbell bench press", target: "4 x 8-12", muscle: "chest" },
        { name: "dumbbell rows", target: "3 x 10-12", muscle: "back" },
        { name: "dumbbell shoulder press", target: "3 x 10-12", muscle: "shoulders" },
        { name: "dumbbell squats", target: "4 x 10-12", muscle: "legs" },
        { name: "dumbbell lunges", target: "3 x 10 each leg", muscle: "legs" },
        { name: "dumbbell RDL", target: "3 x 12-15", muscle: "hamstrings" },
        { name: "dumbbell curls", target: "3 x 12-15", muscle: "biceps" }
      ],
      kettlebell: [
        { name: "kettlebell swings", target: "4 x 15-20", muscle: "fullbody" },
        { name: "kettlebell goblet squats", target: "4 x 10-12", muscle: "legs" },
        { name: "kettlebell rows", target: "3 x 10-12", muscle: "back" },
        { name: "kettlebell press", target: "3 x 10-12", muscle: "shoulders" },
        { name: "kettlebell deadlifts", target: "4 x 10-12", muscle: "hamstrings" }
      ],
      none: [
        { name: "bodyweight squats", target: "3 x 15-20", muscle: "legs" },
        { name: "lunges", target: "3 x 12 each leg", muscle: "legs" },
        { name: "pushups", target: "3 x max reps", muscle: "chest" },
        { name: "pike pushups", target: "3 x 8-12", muscle: "shoulders" },
        { name: "plank", target: "3 x 40-60 seconds", muscle: "core" },
        { name: "mountain climbers", target: "3 x 20 each side", muscle: "cardio" },
        { name: "burpees", target: "3 x 10-15", muscle: "fullbody" },
        { name: "glute bridges", target: "3 x 15-20", muscle: "glutes" }
      ],
      // GYM EQUIPMENT
      barbell: [
        { name: "barbell back squat", target: "4 x 6-8", muscle: "legs" },
        { name: "barbell bench press", target: "4 x 6-8", muscle: "chest" },
        { name: "barbell deadlift", target: "4 x 5-6", muscle: "hamstrings" },
        { name: "barbell rows", target: "4 x 8-10", muscle: "back" },
        { name: "barbell overhead press", target: "4 x 6-8", muscle: "shoulders" },
        { name: "barbell RDL", target: "3 x 10-12", muscle: "hamstrings" },
        { name: "barbell front squat", target: "3 x 8-10", muscle: "legs" },
        { name: "barbell hip thrust", target: "4 x 10-12", muscle: "glutes" }
      ],
      cable_machine: [
        { name: "cable flyes", target: "3 x 12-15", muscle: "chest" },
        { name: "cable rows", target: "4 x 10-12", muscle: "back" },
        { name: "cable lateral raises", target: "3 x 12-15", muscle: "shoulders" },
        { name: "cable tricep pushdowns", target: "3 x 12-15", muscle: "triceps" },
        { name: "cable bicep curls", target: "3 x 12-15", muscle: "biceps" },
        { name: "cable face pulls", target: "3 x 15-20", muscle: "back" },
        { name: "cable woodchops", target: "3 x 12 each side", muscle: "core" }
      ],
      smith_machine: [
        { name: "smith machine squats", target: "4 x 8-10", muscle: "legs" },
        { name: "smith machine bench press", target: "4 x 8-10", muscle: "chest" },
        { name: "smith machine rows", target: "3 x 10-12", muscle: "back" },
        { name: "smith machine shoulder press", target: "3 x 8-10", muscle: "shoulders" },
        { name: "smith machine RDL", target: "3 x 10-12", muscle: "hamstrings" }
      ],
      leg_press: [
        { name: "leg press", target: "4 x 10-12", muscle: "legs" },
        { name: "single leg press", target: "3 x 10 each leg", muscle: "legs" },
        { name: "wide stance leg press", target: "3 x 12-15", muscle: "glutes" }
      ],
      squat_rack: [
        { name: "back squats", target: "4 x 6-8", muscle: "legs" },
        { name: "front squats", target: "4 x 8-10", muscle: "legs" },
        { name: "overhead press (rack)", target: "4 x 6-8", muscle: "shoulders" }
      ],
      bench_press: [
        { name: "flat bench press", target: "4 x 6-8", muscle: "chest" },
        { name: "incline bench press", target: "3 x 8-10", muscle: "chest" },
        { name: "decline bench press", target: "3 x 8-10", muscle: "chest" }
      ],
      pull_up_bar: [
        { name: "pull-ups", target: "3 x max reps", muscle: "back" },
        { name: "chin-ups", target: "3 x max reps", muscle: "biceps" },
        { name: "hanging leg raises", target: "3 x 10-12", muscle: "core" }
      ],
      dip_station: [
        { name: "chest dips", target: "3 x 8-12", muscle: "chest" },
        { name: "tricep dips", target: "3 x 10-15", muscle: "triceps" }
      ],
      lat_pulldown: [
        { name: "wide grip lat pulldown", target: "4 x 10-12", muscle: "back" },
        { name: "close grip lat pulldown", target: "3 x 10-12", muscle: "back" }
      ],
      rowing_machine: [
        { name: "seated cable row", target: "4 x 10-12", muscle: "back" },
        { name: "rowing cardio", target: "3 x 2 minutes", muscle: "cardio" }
      ],
      leg_curl: [
        { name: "lying leg curls", target: "3 x 12-15", muscle: "hamstrings" },
        { name: "seated leg curls", target: "3 x 12-15", muscle: "hamstrings" }
      ],
      leg_extension: [
        { name: "leg extensions", target: "3 x 12-15", muscle: "legs" }
      ],
      chest_fly: [
        { name: "chest fly machine", target: "3 x 12-15", muscle: "chest" }
      ],
      pec_deck: [
        { name: "pec deck flyes", target: "3 x 12-15", muscle: "chest" }
      ],
      preacher_curl: [
        { name: "preacher curls", target: "3 x 10-12", muscle: "biceps" }
      ],
      ez_bar: [
        { name: "EZ bar curls", target: "3 x 10-12", muscle: "biceps" },
        { name: "skull crushers (EZ bar)", target: "3 x 10-12", muscle: "triceps" }
      ],
      trap_bar: [
        { name: "trap bar deadlifts", target: "4 x 6-8", muscle: "fullbody" },
        { name: "trap bar carries", target: "3 x 40 seconds", muscle: "grip" }
      ],
      resistance_bands: [
        { name: "band pull-aparts", target: "3 x 15-20", muscle: "back" },
        { name: "band face pulls", target: "3 x 15-20", muscle: "back" }
      ],
      medicine_balls: [
        { name: "medicine ball slams", target: "3 x 12-15", muscle: "fullbody" },
        { name: "medicine ball rotational throws", target: "3 x 10 each side", muscle: "core" }
      ],
      slam_balls: [
        { name: "slam ball slams", target: "3 x 15-20", muscle: "fullbody" }
      ],
      battle_ropes: [
        { name: "battle rope waves", target: "4 x 30 seconds", muscle: "cardio" }
      ],
      trx: [
        { name: "TRX rows", target: "3 x 12-15", muscle: "back" },
        { name: "TRX pushups", target: "3 x 10-12", muscle: "chest" }
      ],
      bosu_ball: [
        { name: "bosu ball squats", target: "3 x 12-15", muscle: "legs" }
      ],
      ab_wheel: [
        { name: "ab wheel rollouts", target: "3 x 8-12", muscle: "core" }
      ],
      glute_ham: [
        { name: "glute ham raises", target: "3 x 8-12", muscle: "hamstrings" }
      ],
      hyperextension: [
        { name: "back extensions", target: "3 x 12-15", muscle: "back" }
      ],
      calf_raise: [
        { name: "standing calf raises", target: "4 x 15-20", muscle: "calves" },
        { name: "seated calf raises", target: "3 x 15-20", muscle: "calves" }
      ],
      hack_squat: [
        { name: "hack squats", target: "4 x 10-12", muscle: "legs" }
      ],
      sissy_squat: [
        { name: "sissy squats", target: "3 x 10-12", muscle: "legs" }
      ],
      plyo_box: [
        { name: "box jumps", target: "4 x 8-10", muscle: "legs" },
        { name: "box step-ups", target: "3 x 12 each leg", muscle: "legs" }
      ],
      agility_ladder: [
        { name: "agility ladder drills", target: "3 x 2 minutes", muscle: "cardio" }
      ],
      speed_sled: [
        { name: "sled pushes", target: "4 x 20 meters", muscle: "legs" },
        { name: "sled pulls", target: "4 x 20 meters", muscle: "back" }
      ],
      treadmill: [
        { name: "treadmill incline walk", target: "20-30 minutes", muscle: "cardio" },
        { name: "treadmill sprints", target: "8 x 30 seconds", muscle: "cardio" }
      ],
      elliptical: [
        { name: "elliptical cardio", target: "20-30 minutes", muscle: "cardio" }
      ],
      stationary_bike: [
        { name: "bike intervals", target: "20 minutes", muscle: "cardio" }
      ],
      stair_climber: [
        { name: "stair climber", target: "15-20 minutes", muscle: "cardio" }
      ],
      assault_bike: [
        { name: "assault bike sprints", target: "8 x 20 seconds", muscle: "cardio" }
      ],
      ski_erg: [
        { name: "ski erg intervals", target: "5 x 1 minute", muscle: "cardio" }
      ],
      kettlebells: [
        { name: "kettlebell swings", target: "4 x 15-20", muscle: "fullbody" },
        { name: "kettlebell goblet squats", target: "4 x 10-12", muscle: "legs" },
        { name: "kettlebell Turkish get-ups", target: "3 x 5 each side", muscle: "fullbody" }
      ]
    };

    // GENERATE CUSTOM WORKOUT BASED ON EQUIPMENT
    function generateCustomWorkout(equipment, goalKey) {
      var availableExercises = [];
      
      if (!equipment || equipment.length === 0 || equipment.includes('none')) {
        availableExercises = EQUIPMENT_EXERCISES.none;
      } else {
        equipment.forEach(function(item) {
          if (EQUIPMENT_EXERCISES[item]) {
            availableExercises = availableExercises.concat(EQUIPMENT_EXERCISES[item]);
          }
        });
        
        if (availableExercises.length === 0) {
          availableExercises = EQUIPMENT_EXERCISES.none;
        }
      }
      
      var workouts = [];
      
      if (goalKey === 'build_muscle') {
        workouts = buildMuscleWorkouts(availableExercises);
      } else if (goalKey === 'lose_weight') {
        workouts = loseWeightWorkouts(availableExercises);
      } else {
        workouts = keepFitWorkouts(availableExercises);
      }
      
      return {
        id: 'custom_' + goalKey,
        goalKey: goalKey,
        label: 'custom home plan',
        environment: 'home',
        days: workouts
      };
    }

    function buildMuscleWorkouts(exercises) {
      var push = exercises.filter(function(e) {
        return e.muscle === 'chest' || e.muscle === 'shoulders' || e.muscle === 'triceps';
      });
      
      var pull = exercises.filter(function(e) {
        return e.muscle === 'back' || e.muscle === 'biceps';
      });
      
      var legs = exercises.filter(function(e) {
        return e.muscle === 'legs' || e.muscle === 'hamstrings' || e.muscle === 'glutes' || e.muscle === 'calves';
      });
      
      return [
        {
          id: 'custom_push',
          label: 'push day (chest, shoulders, triceps)',
          exercises: push.slice(0, 5).length > 0 ? push.slice(0, 5) : EQUIPMENT_EXERCISES.none.filter(function(e) { return e.muscle === 'chest'; }).slice(0, 3)
        },
        {
          id: 'custom_pull',
          label: 'pull day (back, biceps)',
          exercises: pull.slice(0, 5).length > 0 ? pull.slice(0, 5) : EQUIPMENT_EXERCISES.none.filter(function(e) { return e.muscle === 'back'; }).concat(EQUIPMENT_EXERCISES.none.filter(function(e) { return e.muscle === 'chest'; })).slice(0, 3)
        },
        {
          id: 'custom_legs',
          label: 'leg day',
          exercises: legs.slice(0, 5).length > 0 ? legs.slice(0, 5) : EQUIPMENT_EXERCISES.none.filter(function(e) { return e.muscle === 'legs' || e.muscle === 'glutes'; }).slice(0, 5)
        },
        {
          id: 'custom_upper',
          label: 'upper body mix',
          exercises: push.slice(0, 3).concat(pull.slice(0, 2))
        }
      ];
    }

    function loseWeightWorkouts(exercises) {
      var cardio = exercises.filter(function(e) {
        return e.muscle === 'cardio' || e.muscle === 'fullbody';
      });
      
      var strength = exercises.filter(function(e) {
        return e.muscle !== 'cardio';
      });
      
      return [
        {
          id: 'custom_circuit_a',
          label: 'circuit A (strength + cardio)',
          exercises: strength.slice(0, 4).concat(cardio.slice(0, 2))
        },
        {
          id: 'custom_circuit_b',
          label: 'circuit B (full body)',
          exercises: strength.slice(2, 8).length > 0 ? strength.slice(2, 8) : EQUIPMENT_EXERCISES.none.slice(0, 6)
        }
      ];
    }

    function keepFitWorkouts(exercises) {
      return [
        {
          id: 'custom_strength_flow',
          label: 'strength flow (balanced)',
          exercises: exercises.slice(0, 6).length > 0 ? exercises.slice(0, 6) : EQUIPMENT_EXERCISES.none.slice(0, 4)
        },
        {
          id: 'custom_power_mix',
          label: 'power mix (intensity)',
          exercises: exercises.slice(3, 9).length > 0 ? exercises.slice(3, 9) : EQUIPMENT_EXERCISES.none.slice(2, 6)
        },
        {
          id: 'custom_mobility_burn',
          label: 'mobility burn (movement)',
          exercises: exercises.slice(6, 12).length > 0 ? exercises.slice(6, 12) : EQUIPMENT_EXERCISES.none.slice(0, 4)
        }
      ];
    }

    // WORKOUT PLANS DATA
    var WORKOUT_PLANS = {
      lw_home: {
        id: "lw_home",
        goalKey: "lose_weight",
        label: "lose weight Â· home only",
        environment: "home",
        days: [{
          id: "lw_home_A",
          label: "home circuit A",
          exercises: [
            { name: "bodyweight squats", target: "15 reps" },
            { name: "incline pushups (table)", target: "12 reps" },
            { name: "reverse lunges", target: "10 per leg" },
            { name: "high knees", target: "30 to 40 seconds" },
            { name: "plank", target: "30 seconds" },
            { name: "mountain climbers", target: "20 per side" }
          ]
        }]
      },
      lw_gym: {
        id: "lw_gym",
        goalKey: "lose_weight",
        label: "lose weight Â· gym only",
        environment: "gym",
        days: [{
          id: "lw_gym_intervals",
          label: "treadmill intervals",
          exercises: [
            { name: "treadmill walk or jog", target: "20 to 25 min intervals" }
          ]
        }]
      },
      bm_home: {
        id: "bm_home",
        goalKey: "build_muscle",
        label: "build muscle Â· home 4 day",
        environment: "home",
        days: [
          {
            id: "bm_home_D1",
            label: "day 1 Â· upper push",
            exercises: [
              { name: "pushups", target: "4 x max reps" },
              { name: "incline pushups", target: "3 x 10" },
              { name: "chair dips", target: "3 x 10 to 12" },
              { name: "pike pushups", target: "3 x 6 to 10" },
              { name: "triceps extensions (band or jug)", target: "3 x 12 to 15" }
            ]
          },
          {
            id: "bm_home_D2",
            label: "day 2 Â· lower",
            exercises: [
              { name: "goblet squats (water jug)", target: "4 x 10 to 12" },
              { name: "reverse lunges", target: "3 x 10 each leg" },
              { name: "glute bridges", target: "3 x 15" },
              { name: "calf raises", target: "4 x 15 to 20" },
              { name: "plank", target: "3 x 40 seconds" }
            ]
          },
          {
            id: "bm_home_D3",
            label: "day 3 Â· upper pull",
            exercises: [
              { name: "bent over rows (jug or band)", target: "4 x 8 to 12" },
              { name: "reverse snow angels", target: "3 x 12 to 15" },
              { name: "bicep curls (jug or band)", target: "3 x 12" },
              { name: "rows under table (inverted)", target: "3 x 6 to 10" }
            ]
          },
          {
            id: "bm_home_D4",
            label: "day 4 Â· lower focus",
            exercises: [
              { name: "romanian deadlifts (jug)", target: "4 x 10 to 12" },
              { name: "split squats", target: "3 x 10 each leg" },
              { name: "hamstring hip lifts", target: "3 x 12 to 15" },
              { name: "calf raises", target: "4 x 15 to 20" },
              { name: "side plank", target: "3 x 30 seconds each side" }
            ]
          }
        ]
      },
      bm_gym: {
        id: "bm_gym",
        goalKey: "build_muscle",
        label: "build muscle Â· gym 4 day",
        environment: "gym",
        days: [
          {
            id: "bm_gym_D1",
            label: "day 1 Â· upper push",
            exercises: [
              { name: "bench press", target: "4 x 6 to 10" },
              { name: "incline dumbbell press", target: "3 x 8 to 12" },
              { name: "shoulder press", target: "3 x 8 to 10" },
              { name: "lateral raises", target: "3 x 12 to 15" },
              { name: "tricep pushdowns", target: "3 x 10 to 12" }
            ]
          },
          {
            id: "bm_gym_D2",
            label: "day 2 Â· lower quad",
            exercises: [
              { name: "back squat", target: "4 x 6 to 10" },
              { name: "leg press", target: "3 x 10" },
              { name: "leg extension", target: "3 x 12 to 15" },
              { name: "calf raises", target: "4 x 12 to 20" }
            ]
          },
          {
            id: "bm_gym_D3",
            label: "day 3 Â· upper pull",
            exercises: [
              { name: "pull ups", target: "4 x 6 to 10" },
              { name: "bent over rows", target: "3 x 6 to 10" },
              { name: "seated row", target: "3 x 10" },
              { name: "face pulls", target: "3 x 12 to 15" },
              { name: "bicep curls", target: "3 x 10 to 12" }
            ]
          },
          {
            id: "bm_gym_D4",
            label: "day 4 Â· lower ham and glute",
            exercises: [
              { name: "romanian deadlift", target: "4 x 6 to 10" },
              { name: "hamstring curl", target: "3 x 10 to 12" },
              { name: "hip thrust", target: "3 x 8 to 12" },
              { name: "calf raises", target: "4 x 12 to 20" }
            ]
          }
        ]
      },
      kf_home: {
        id: "kf_home",
        goalKey: "keep_fit",
        label: "keep fit Â· home full body",
        environment: "home",
        days: [
          {
            id: "kf_home_A",
            label: "strength fundamentals",
            exercises: [
              { name: "squats", target: "3 x 10" },
              { name: "pushups", target: "3 x 8 to 12" },
              { name: "bent over rows (jug)", target: "3 x 10" },
              { name: "plank", target: "1 x 60 seconds" }
            ]
          },
          {
            id: "kf_home_B",
            label: "balanced movement",
            exercises: [
              { name: "lunges", target: "3 x 10 each leg" },
              { name: "shoulder press (jug)", target: "3 x 10" },
              { name: "band rows", target: "3 x 10" },
              { name: "side plank", target: "3 x 30 seconds" }
            ]
          },
          {
            id: "kf_home_C",
            label: "core & stability",
            exercises: [
              { name: "glute bridge", target: "3 x 12" },
              { name: "incline pushups", target: "3 x 10" },
              { name: "reverse fly (band)", target: "3 x 12" },
              { name: "hollow hold", target: "3 x 20 seconds" }
            ]
          }
        ]
      },
      kf_gym: {
        id: "kf_gym",
        goalKey: "keep_fit",
        label: "keep fit Â· gym full body",
        environment: "gym",
        days: [
          {
            id: "kf_gym_A",
            label: "compound power",
            exercises: [
              { name: "leg press", target: "3 x 10" },
              { name: "chest press", target: "3 x 10" },
              { name: "seated row", target: "3 x 10" }
            ]
          },
          {
            id: "kf_gym_B",
            label: "functional strength",
            exercises: [
              { name: "smith lunges", target: "3 x 10 each leg" },
              { name: "shoulder press", target: "3 x 10" },
              { name: "cable chest fly", target: "3 x 12" },
              { name: "face pulls", target: "3 x 15" }
            ]
          }
        ]
      }
    };

    // DIETS DATA
    var DIETS = {
      lose_weight: {
        title: "weight loss diet Â· training day layout (nigerian foods)",
        goal: "moderate calorie deficit, high protein and high fiber",
        blocks: [
          {
            label: "training day Â· breakfast",
            items: [
              "oats plus milk plus banana",
              "akara plus pap in a small portion",
              "boiled eggs plus small bread plus tea",
              "unsweetened yogurt plus groundnut plus fruit"
            ]
          },
          {
            label: "training day Â· lunch",
            items: [
              "rice in small portion plus beans plus boiled egg or fish",
              "moi moi plus salad plus grilled chicken",
              "eba in small portion plus okra or ogbono and fish",
              "yam small boiled plus beans plus vegetables"
            ]
          },
          {
            label: "training day Â· dinner",
            items: [
              "beans plus plantain in small portion",
              "sweet potato plus boiled egg plus vegetable",
              "stir fry vegetables plus chicken breast or fish",
              "tuwo plus light soup plus fish"
            ]
          },
          {
            label: "training day Â· snacks with lower calories",
            items: [
              "fruits like apple, watermelon, pawpaw, banana",
              "groundnut in small handful",
              "kuli kuli in small piece",
              "roasted corn half cob"
            ]
          },
          {
            label: "avoid in excess",
            items: [
              "sugary drinks, sugary zobo, malt",
              "very big bread plus stew plates often",
              "fried snacks daily like puff puff, buns, suya plus bread",
              "heavy swallow late at night"
            ]
          }
        ]
      },
      build_muscle: {
        title: "muscle building diet Â· training day layout (nigerian foods)",
        goal: "high protein with enough carbs and fats for growth",
        blocks: [
          {
            label: "training day Â· protein backbone",
            items: [
              "eggs",
              "beans",
              "fish like tilapia, mackerel or sardine",
              "chicken, especially thigh",
              "beef that is lean",
              "turkey",
              "yogurt and milk"
            ]
          },
          {
            label: "training day Â· meal examples",
            items: [
              "beans plus fish plus plantain",
              "rice plus beans plus beef",
              "sweet potato plus eggs plus vegetables",
              "eba in small portion plus efo riro plus chicken",
              "moi moi plus pap plus boiled egg",
              "bread plus sardine plus boiled egg"
            ]
          },
          {
            label: "training day Â· snacks for bulking",
            items: [
              "groundnut",
              "banana plus milk",
              "suya from lean part",
              "kuli kuli in moderation",
              "garri plus milk plus groundnut around training"
            ]
          }
        ]
      },
      keep_fit: {
        title: "keep fit diet Â· training day layout (nigerian foods)",
        goal: "balanced macros and moderate calories",
        blocks: [
          {
            label: "training day Â· balanced plate",
            items: [
              "rice plus beans plus fish plus vegetables",
              "yam small portion plus eggs plus vegetables",
              "eba small plus okra plus fish",
              "semovita small plus vegetable plus chicken",
              "spaghetti small plus stir fry plus beef"
            ]
          },
          {
            label: "every day Â· fruits and vegetables to rotate",
            items: [
              "banana, orange, watermelon, apple, pawpaw",
              "tomato, pepper, ugu, spinach, carrot, cabbage"
            ]
          },
          {
            label: "every day Â· hydration",
            items: [
              "water all day",
              "unsweetened zobo",
              "tea without sugar most of the time"
            ]
          }
        ]
      }
    };

    // STORAGE KEYS
    var USERS_KEY = "bright_users_v1";
    var ACTIVE_USER_KEY = "bright_active_user_id_v1";
    var THEME_KEY = "bright_theme_v1";

    // STATE
    var currentUser = null;
    var currentPlan = null;
    var currentDayPlan = null;
    var completedExercises = [];

    // USER MANAGEMENT
    function loadUsers() {
      try {
        var raw = localStorage.getItem(USERS_KEY);
        return raw ? JSON.parse(raw) : [];
      } catch (e) {
        return [];
      }
    }

    function saveUsers(users) {
      try { localStorage.setItem(USERS_KEY, JSON.stringify(users)); } catch (e) {}
    }

    function getActiveUserId() {
      try { return localStorage.getItem(ACTIVE_USER_KEY); } catch (e) { return null; }
    }

    function setActiveUserId(id) {
      try { localStorage.setItem(ACTIVE_USER_KEY, id); } catch (e) {}
    }

    function getActiveUser() {
      var id = getActiveUserId();
      if (!id) return null;
      var users = loadUsers();
      return users.find(function(u) { return u.id === id; }) || null;
    }

    function createUser(name, goalKey, environment, equipment) {
      var users = loadUsers();
      var id = "u_" + Date.now() + "_" + Math.floor(Math.random() * 9999);
      var user = {
        id: id,
        name: name && name.trim() ? name.trim() : "bright",
        goalKey: goalKey,
        environment: environment,
        equipment: Array.isArray(equipment) ? equipment : [],
        trainingFrequency: 5,
        trainingDays: [1, 2, 3, 4, 5], // Mon, Tue, Wed, Thu, Fri (all weekdays by default)
        createdAt: new Date().toISOString()
      };
      users.push(user);
      saveUsers(users);
      setActiveUserId(id);
      return user;
    }

    function updateActiveUser(updates) {
      var id = getActiveUserId();
      if (!id) return null;
      var users = loadUsers();
      var idx = users.findIndex(function(u) { return u.id === id; });
      if (idx < 0) return null;
      users[idx] = Object.assign({}, users[idx], updates);
      saveUsers(users);
      return users[idx];
    }

    // SESSION MANAGEMENT
    function storageKeyForSessions(userId) {
      return "bright_sessions_v2_" + userId;
    }

    function loadSessionsForUser(userId) {
      try {
        var raw = localStorage.getItem(storageKeyForSessions(userId));
        return raw ? JSON.parse(raw) : [];
      } catch (e) {
        return [];
      }
    }

    function saveSessionsForUser(userId, sessions) {
      try {
        localStorage.setItem(storageKeyForSessions(userId), JSON.stringify(sessions));
      } catch (e) {}
    }

    function computeStreakForUser(userId) {
      var sessions = loadSessionsForUser(userId);
      if (sessions.length === 0) return 0;
      
      sessions.sort(function(a, b) {
        return new Date(b.completedAt) - new Date(a.completedAt);
      });

      var streak = 0;
      var lastDate = null;

      for (var i = 0; i < sessions.length; i++) {
        var sessionDate = new Date(sessions[i].completedAt);
        sessionDate.setHours(0, 0, 0, 0);

        if (lastDate === null) {
          streak = 1;
          lastDate = sessionDate;
        } else {
          var diffDays = Math.floor((lastDate - sessionDate) / (1000 * 60 * 60 * 24));
          if (diffDays === 1) {
            streak++;
            lastDate = sessionDate;
          } else {
            break;
          }
        }
      }

      return streak;
    }

    // PLAN SELECTION
    function getActivePlan() {
      if (!currentUser) return null;
      var goal = GOALS[currentUser.goalKey];
      if (!goal) return null;
      
      // For home training, generate custom workout based on equipment
      if (currentUser.environment === "home") {
        return generateCustomWorkout(currentUser.equipment || [], currentUser.goalKey);
      }
      
      // For gym training, use preset plans
      var planId = goal.gymPlanId;
      return WORKOUT_PLANS[planId] || null;
    }

    function getCurrentDayPlan() {
      var plan = getActivePlan();
      if (!plan || !plan.days || plan.days.length === 0) return null;
      
      var dayIndex = new Date().getDay();
      var trainingDays = currentUser && currentUser.trainingDays ? currentUser.trainingDays : [1, 2, 3, 4, 5];
      
      // Check if today is a training day
      if (!trainingDays.includes(dayIndex)) {
        return null; // Return null for rest days
      }
      
      // Calculate which workout in the rotation to use based on training days
      var trainingDaysSorted = trainingDays.slice().sort(function(a, b) { return a - b; });
      var todayIndexInTraining = trainingDaysSorted.indexOf(dayIndex);
      
      if (todayIndexInTraining < 0) return null;
      
      // Cycle through available workouts
      return plan.days[todayIndexInTraining % plan.days.length];
    }

    // THEME MANAGEMENT
    function applyTheme(theme) {
      var valid = ["amoled", "nebula", "soft"].indexOf(theme) >= 0 ? theme : "nebula";
      document.body.className = "theme-" + valid;
      try { localStorage.setItem(THEME_KEY, valid); } catch (e) {}
    }

    function loadTheme() {
      try {
        var saved = localStorage.getItem(THEME_KEY);
        return saved || "nebula";
      } catch (e) {
        return "nebula";
      }
    }

    // NAVIGATION
    function switchPage(pageName) {
      var pages = document.querySelectorAll('.page');
      var navItems = document.querySelectorAll('.nav-item');
      
      pages.forEach(function(page) {
        page.classList.remove('active');
      });
      
      navItems.forEach(function(item) {
        item.classList.remove('active');
      });

      var targetPage = document.getElementById('page-' + pageName);
      if (targetPage) {
        targetPage.classList.add('active');
      }

      var targetNav = document.querySelector('.nav-item[data-page="' + pageName + '"]');
      if (targetNav) {
        targetNav.classList.add('active');
      }

      var titles = {
        'workout': 'Workout',
        'goal': 'Goal',
        'diet': 'Nutrition',
        'history': 'History'
      };

      var subtitles = {
        'workout': 'Track your training',
        'goal': 'Set your objective',
        'diet': 'Fuel your progress',
        'history': 'Review your journey'
      };

      document.getElementById('page-title').textContent = titles[pageName] || pageName;
      document.getElementById('page-subtitle').textContent = subtitles[pageName] || '';

      if (pageName === 'workout') {
        renderWorkoutPage();
      } else if (pageName === 'goal') {
        renderGoalPage();
      } else if (pageName === 'diet') {
        renderDietPage();
      } else if (pageName === 'history') {
        renderHistoryPage();
      }
    }

    // RENDER WORKOUT PAGE
    function renderWorkoutPage() {
      if (!currentUser) return;

      var greeting = getGreeting(currentUser.name);
      document.getElementById('workout-greeting').textContent = greeting;

      renderWeeklyCalendar();

      currentDayPlan = getCurrentDayPlan();
      
      // If no workout plan available, show rest day message
      if (!currentDayPlan || !currentDayPlan.exercises || currentDayPlan.exercises.length === 0) {
        document.getElementById('workout-hero').style.display = 'none';
        document.getElementById('main-lift-section').style.display = 'none';
        document.getElementById('workout-exercises-section').style.display = 'none';
        document.getElementById('workout-actions').style.display = 'none';
        document.getElementById('rest-day-section').style.display = 'block';
        return;
      }

      // Show workout interface
      document.getElementById('rest-day-section').style.display = 'none';
      document.getElementById('workout-hero').style.display = 'block';
      document.getElementById('workout-exercises-section').style.display = 'block';
      document.getElementById('workout-actions').style.display = 'block';

      // Display motivation
      displayMotivation();

      // Display workout type badge
      var badgeContainer = document.getElementById('workout-type-badge');
      if (badgeContainer) {
        badgeContainer.innerHTML = getWorkoutTypeBadge(currentDayPlan.label);
      }

      document.getElementById('workout-title').textContent = currentDayPlan.label;
      document.getElementById('workout-summary').textContent = 'Time to lock in and get the work done';

      var muscleList = document.getElementById('workout-muscles');
      muscleList.innerHTML = '';
      var muscleGroups = extractMuscleGroups(currentDayPlan.label);
      muscleGroups.forEach(function(muscle) {
        var pill = document.createElement('div');
        pill.className = 'pill';
        pill.textContent = muscle;
        muscleList.appendChild(pill);
      });

      if (currentDayPlan.exercises && currentDayPlan.exercises.length > 0) {
        var mainExercise = currentDayPlan.exercises[0];
        document.getElementById('main-lift-name').textContent = mainExercise.name;
        document.getElementById('main-lift-section').style.display = 'block';
      } else {
        document.getElementById('main-lift-section').style.display = 'none';
      }

      renderExercises();
      updateCompletion();
    }

    function renderWeeklyCalendar() {
      var container = document.getElementById('weekly-calendar');
      if (!container) return;
      
      container.innerHTML = '';
      
      var today = new Date();
      var currentDay = today.getDay();
      var dayLabels = ['S', 'M', 'T', 'W', 'T', 'F', 'S'];
      var dayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
      
      var trainingDays = currentUser && currentUser.trainingDays ? currentUser.trainingDays : [1, 2, 3, 4, 5];
      
      // Start from Sunday
      for (var i = 0; i < 7; i++) {
        var dayCell = document.createElement('div');
        dayCell.className = 'day-cell';
        
        var date = new Date(today);
        date.setDate(today.getDate() - currentDay + i);
        
        var isToday = i === currentDay;
        var isTrainingDay = trainingDays.includes(i);
        
        if (isToday) {
          dayCell.classList.add('today');
        }
        if (isTrainingDay) {
          dayCell.classList.add('training-day');
        } else {
          dayCell.classList.add('rest-day');
        }
        
        var label = document.createElement('div');
        label.className = 'day-label';
        label.textContent = dayLabels[i];
        
        var number = document.createElement('div');
        number.className = 'day-number';
        number.textContent = date.getDate();
        
        dayCell.appendChild(label);
        dayCell.appendChild(number);
        
        if (isTrainingDay) {
          var indicator = document.createElement('div');
          indicator.className = 'day-indicator';
          dayCell.appendChild(indicator);
        }
        
        container.appendChild(dayCell);
      }
    }

    function extractMuscleGroups(label) {
      var muscles = [];
      var lower = label.toLowerCase();
      if (lower.includes('push')) muscles.push('Chest', 'Shoulders', 'Triceps');
      if (lower.includes('pull')) muscles.push('Back', 'Biceps');
      if (lower.includes('leg') || lower.includes('lower')) muscles.push('Legs');
      if (lower.includes('quad')) muscles.push('Quads');
      if (lower.includes('ham')) muscles.push('Hamstrings');
      if (lower.includes('glute')) muscles.push('Glutes');
      return muscles.length > 0 ? muscles : ['Full Body'];
    }

    function getGreeting(name) {
      var hour = new Date().getHours();
      var time = hour < 12 ? 'Morning' : hour < 18 ? 'Afternoon' : 'Evening';
      return 'Good ' + time + ', ' + name;
    }

    function displayMotivation() {
      var container = document.getElementById('motivation-banner-container');
      if (!container) return;
      
      // Pick motivation based on current day (one per day)
      var today = new Date();
      var dayOfYear = Math.floor((today - new Date(today.getFullYear(), 0, 0)) / 86400000);
      var motivationIndex = dayOfYear % MOTIVATIONS.length;
      var motivation = MOTIVATIONS[motivationIndex];
      
      container.innerHTML = '<div class="motivation-banner"><span class="motivation-icon">' + motivation.icon + '</span><div class="motivation-text">' + motivation.text + '</div></div>';
    }

    function getWorkoutTypeBadge(label) {
      var lower = label.toLowerCase();
      var type = 'fullbody';
      var icon = '';
      var displayText = '';
      
      if (lower.includes('push')) {
        type = 'push';
        displayText = 'Push Day';
        icon = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2v20M2 12h20"/><circle cx="12" cy="12" r="3" fill="currentColor"/></svg>';
      } else if (lower.includes('pull')) {
        type = 'pull';
        displayText = 'Pull Day';
        icon = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M4 12h16M12 4v16"/><polyline points="8 8 12 4 16 8"/><polyline points="8 16 12 20 16 16"/></svg>';
      } else if (lower.includes('leg')) {
        type = 'legs';
        displayText = 'Leg Day';
        icon = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M8 2v8a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2V2"/><path d="M10 12v10M14 12v10"/><circle cx="10" cy="19" r="2" fill="currentColor"/><circle cx="14" cy="19" r="2" fill="currentColor"/></svg>';
      } else if (lower.includes('cardio') || lower.includes('circuit')) {
        type = 'cardio';
        displayText = 'Cardio';
        icon = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" fill="currentColor" opacity="0.2"/><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>';
      } else if (lower.includes('upper')) {
        type = 'upper';
        displayText = 'Upper Body';
        icon = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="6" r="3" fill="currentColor"/><path d="M12 9v6M6 12h12M6 12l-3 6M18 12l3 6"/></svg>';
      } else if (lower.includes('lower')) {
        type = 'lower';
        displayText = 'Lower Body';
        icon = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><rect x="8" y="2" width="8" height="8" rx="2" fill="currentColor" opacity="0.3"/><path d="M10 10v12M14 10v12M8 18h4M14 18h4"/></svg>';
      } else if (lower.includes('strength') || lower.includes('power')) {
        type = 'strength';
        displayText = 'Strength';
        icon = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="10" width="4" height="4" rx="1" fill="currentColor"/><rect x="18" y="10" width="4" height="4" rx="1" fill="currentColor"/><line x1="6" y1="12" x2="18" y2="12"/><rect x="9" y="8" width="6" height="8" rx="1"/></svg>';
      } else if (lower.includes('core') || lower.includes('abs') || lower.includes('stability')) {
        type = 'core';
        displayText = 'Core';
        icon = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"/><circle cx="12" cy="12" r="5" fill="currentColor" opacity="0.3"/><path d="M12 3v3M12 18v3M21 12h-3M6 12H3"/></svg>';
      } else if (lower.includes('balanced') || lower.includes('mobility') || lower.includes('movement')) {
        type = 'balanced';
        displayText = 'Balanced';
        icon = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="8" r="3"/><path d="M12 11v11M8 14l-4 8M16 14l4 8"/><line x1="8" y1="14" x2="16" y2="14"/></svg>';
      } else if (lower.includes('compound')) {
        type = 'compound';
        displayText = 'Compound';
        icon = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 2 7 12 12 22 7 12 2" fill="currentColor" opacity="0.3"/><polyline points="2 17 12 22 22 17"/><polyline points="2 12 12 17 22 12"/></svg>';
      } else if (lower.includes('functional')) {
        type = 'functional';
        displayText = 'Functional';
        icon = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2L2 7l10 5 10-5-10-5z" fill="currentColor" opacity="0.3"/><path d="M2 17l10 5 10-5M2 12l10 5 10-5"/></svg>';
      } else {
        type = 'fullbody';
        displayText = 'Full Body';
        icon = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="6" r="3" fill="currentColor"/><path d="M12 9v6M6 12l6 3 6-3M8 18l4 4M16 18l-4 4"/></svg>';
      }
      
      return '<div class="workout-type-badge ' + type + '">' + icon + '<span>' + displayText + '</span></div>';
    }

    function getExerciseIcon(exerciseName) {
      var lower = exerciseName.toLowerCase();
      
      // Determine icon based on exercise name
      if (lower.includes('squat') || lower.includes('lunge')) {
        return '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 20px; height: 20px; margin-right: 8px;"><path d="M8 2v8a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2V2"/><path d="M10 12v10M14 12v10"/><circle cx="10" cy="19" r="2" fill="currentColor"/><circle cx="14" cy="19" r="2" fill="currentColor"/></svg>';
      } else if (lower.includes('push') || lower.includes('press') || lower.includes('bench')) {
        return '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 20px; height: 20px; margin-right: 8px;"><path d="M12 2v20M2 12h20"/><circle cx="12" cy="12" r="3" fill="currentColor"/></svg>';
      } else if (lower.includes('pull') || lower.includes('row') || lower.includes('lat')) {
        return '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 20px; height: 20px; margin-right: 8px;"><path d="M4 12h16M12 4v16"/><polyline points="8 8 12 4 16 8"/><polyline points="8 16 12 20 16 16"/></svg>';
      } else if (lower.includes('curl') || lower.includes('bicep')) {
        return '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 20px; height: 20px; margin-right: 8px;"><path d="M6 9a6 6 0 0 1 12 0v6a3 3 0 0 1-6 0V9a3 3 0 0 0-6 0v6"/></svg>';
      } else if (lower.includes('deadlift') || lower.includes('rdl')) {
        return '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 20px; height: 20px; margin-right: 8px;"><rect x="2" y="10" width="4" height="4" rx="1" fill="currentColor"/><rect x="18" y="10" width="4" height="4" rx="1" fill="currentColor"/><line x1="6" y1="12" x2="18" y2="12"/><rect x="9" y="8" width="6" height="8" rx="1"/></svg>';
      } else if (lower.includes('plank') || lower.includes('core') || lower.includes('abs')) {
        return '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 20px; height: 20px; margin-right: 8px;"><circle cx="12" cy="12" r="9"/><circle cx="12" cy="12" r="5" fill="currentColor" opacity="0.3"/></svg>';
      } else if (lower.includes('calf') || lower.includes('raise')) {
        return '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 20px; height: 20px; margin-right: 8px;"><path d="M10 2v14M14 2v14"/><path d="M8 16l4 6 4-6"/></svg>';
      } else if (lower.includes('cardio') || lower.includes('sprint') || lower.includes('run')) {
        return '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 20px; height: 20px; margin-right: 8px;"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" fill="currentColor" opacity="0.2"/></svg>';
      } else if (lower.includes('dip') || lower.includes('tricep')) {
        return '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 20px; height: 20px; margin-right: 8px;"><path d="M6 3v18M18 3v18M6 12h12"/><polyline points="3 9 6 6 9 9"/><polyline points="15 15 18 18 21 15"/></svg>';
      } else if (lower.includes('shoulder') || lower.includes('lateral')) {
        return '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 20px; height: 20px; margin-right: 8px;"><circle cx="12" cy="6" r="3" fill="currentColor"/><path d="M12 9v6M6 12h12M6 12l-3 6M18 12l3 6"/></svg>';
      } else if (lower.includes('fly') || lower.includes('chest')) {
        return '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 20px; height: 20px; margin-right: 8px;"><path d="M3 12h6l3-9 3 9h6"/><path d="M12 12v9"/></svg>';
      } else {
        // Default dumbbell icon
        return '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 20px; height: 20px; margin-right: 8px;"><path d="M6.5 6.5L17.5 17.5M17.5 6.5L6.5 17.5"/><circle cx="12" cy="12" r="2" fill="currentColor"/></svg>';
      }
    }

    function renderExercises() {
      if (!currentDayPlan || !currentDayPlan.exercises) return;

      var list = document.getElementById('exercise-list');
      list.innerHTML = '';

      currentDayPlan.exercises.forEach(function(ex, idx) {
        var card = document.createElement('div');
        card.className = 'exercise-card';
        card.dataset.index = idx;

        var completed = completedExercises[idx] || false;
        if (completed) {
          card.classList.add('completed');
        }

        var header = document.createElement('div');
        header.className = 'exercise-header';

        var info = document.createElement('div');
        info.style.display = 'flex';
        info.style.flexDirection = 'column';
        
        var name = document.createElement('h3');
        name.className = 'exercise-name';
        name.style.display = 'flex';
        name.style.alignItems = 'center';
        name.innerHTML = getExerciseIcon(ex.name) + ex.name;
        
        var target = document.createElement('p');
        target.className = 'exercise-target';
        target.textContent = ex.target;
        info.appendChild(name);
        info.appendChild(target);

        header.appendChild(info);
        card.appendChild(header);

        var inputs = document.createElement('div');
        inputs.className = 'exercise-inputs';

        // Parse the target to determine number of sets
        var numSets = 3; // default
        var targetMatch = ex.target.match(/(\d+)\s*x/i);
        if (targetMatch) {
          numSets = parseInt(targetMatch[1]);
        }

        for (var i = 1; i <= numSets; i++) {
          var setRow = document.createElement('div');
          setRow.className = 'set-row';
          
          var setLabel = document.createElement('div');
          setLabel.textContent = 'Set ' + i;
          
          var repsGroup = document.createElement('div');
          repsGroup.style.flex = '1';
          var repsInput = document.createElement('input');
          repsInput.className = 'exercise-input';
          repsInput.type = 'number';
          repsInput.placeholder = 'Reps';
          repsInput.dataset.exerciseIndex = idx;
          repsInput.dataset.setIndex = i;
          repsInput.dataset.inputType = 'reps';
          repsInput.addEventListener('input', handleExerciseInput);
          repsGroup.appendChild(repsInput);
          
          var kgGroup = document.createElement('div');
          kgGroup.style.flex = '1';
          var kgInput = document.createElement('input');
          kgInput.className = 'exercise-input';
          kgInput.type = 'number';
          kgInput.placeholder = 'kg';
          kgInput.step = '0.5';
          kgInput.dataset.exerciseIndex = idx;
          kgInput.dataset.setIndex = i;
          kgInput.dataset.inputType = 'kg';
          kgInput.addEventListener('input', handleExerciseInput);
          kgGroup.appendChild(kgInput);
          
          setRow.appendChild(setLabel);
          setRow.appendChild(repsGroup);
          setRow.appendChild(kgGroup);
          inputs.appendChild(setRow);
        }

        card.appendChild(inputs);
        list.appendChild(card);
      });
    }

    function handleExerciseInput(e) {
      var exerciseIndex = parseInt(e.target.dataset.exerciseIndex);
      var value = e.target.value;
      
      if (value && parseFloat(value) > 0) {
        completedExercises[exerciseIndex] = true;
        var card = document.querySelector('.exercise-card[data-index="' + exerciseIndex + '"]');
        if (card) {
          card.classList.add('completed');
        }
      }

      updateCompletion();
    }

    function updateCompletion() {
      if (!currentDayPlan || !currentDayPlan.exercises) return;

      var total = currentDayPlan.exercises.length;
      var completed = completedExercises.filter(Boolean).length;
      var percent = total > 0 ? Math.round((completed / total) * 100) : 0;

      document.getElementById('completion-label').textContent = percent + '% Complete';
      document.getElementById('completion-count').textContent = completed + ' of ' + total + ' Exercises';
      document.getElementById('completion-fill').style.width = percent + '%';

      var btn = document.getElementById('finish-workout-btn');
      if (percent === 100) {
        btn.disabled = false;
      } else {
        btn.disabled = true;
      }
    }

    // RENDER GOAL PAGE
    function renderGoalPage() {
      if (!currentUser) return;

      var choicesContainer = document.getElementById('goal-choices');
      choicesContainer.innerHTML = '';

      Object.keys(GOALS).forEach(function(key) {
        var goal = GOALS[key];
        var card = document.createElement('div');
        card.className = 'goal-card';
        if (currentUser.goalKey === key) {
          card.classList.add('active');
        }

        var title = document.createElement('h3');
        title.className = 'goal-title';
        title.textContent = goal.label;

        var meta = document.createElement('div');
        meta.className = 'goal-meta';
        meta.innerHTML = 'Frequency: ' + goal.frequency + '<br>Focus: ' + goal.focus;

        card.appendChild(title);
        card.appendChild(meta);
        
        card.addEventListener('click', function() {
          updateActiveUser({ goalKey: key });
          currentUser.goalKey = key;
          renderGoalPage();
          renderWorkoutPage();
          renderDietPage();
        });

        choicesContainer.appendChild(card);
      });

      var envContainer = document.getElementById('env-choices');
      envContainer.innerHTML = '';
      
      ['home', 'gym'].forEach(function(env) {
        var pill = document.createElement('div');
        pill.className = 'env-pill';
        pill.dataset.env = env;
        pill.textContent = 'Train at ' + (env === 'home' ? 'Home' : 'Gym');
        if (currentUser.environment === env) {
          pill.classList.add('active');
        }
        pill.addEventListener('click', function() {
          updateActiveUser({ environment: env });
          currentUser.environment = env;
          renderGoalPage();
          renderWorkoutPage();
        });
        envContainer.appendChild(pill);
      });

      var goal = GOALS[currentUser.goalKey];
      var plan = getActivePlan();
      var metaHtml = '';
      metaHtml += 'Current Goal: ' + goal.label + '<br>';
      metaHtml += 'Frequency: ' + goal.frequency + '<br>';
      metaHtml += 'Focus: ' + goal.focus + '<br>';
      if (plan) {
        metaHtml += 'Plan: ' + plan.label + '<br>';
      }
      if (currentUser.environment === 'home' && currentUser.equipment && currentUser.equipment.length > 0) {
        var equipList = currentUser.equipment.join(', ');
        if (currentUser.equipment.includes('none')) {
          metaHtml += 'Equipment: Bodyweight only';
        } else {
          metaHtml += 'Equipment: ' + equipList;
        }
      }
      document.getElementById('goal-meta').innerHTML = metaHtml;

      // Show equipment section for home training
      var equipSection = document.getElementById('equipment-section');
      if (currentUser.environment === 'home') {
        equipSection.style.display = 'block';
        var equipDisplay = document.getElementById('equipment-display');
        equipDisplay.innerHTML = '';
        
        var allEquipment = ['chair', 'stairs', 'broomstick', 'buckets', 'backpack', 'towel', 'water_bottles', 'sandbag', 'bands', 'dumbbells', 'kettlebell', 'none'];
        var userEquip = currentUser.equipment || [];
        
        allEquipment.forEach(function(item) {
          var pill = document.createElement('div');
          pill.className = 'equip-pill';
          pill.dataset.equip = item;
          var displayName = item.replace(/_/g, ' ').replace(/\b\w/g, function(l) { return l.toUpperCase(); });
          pill.textContent = displayName;
          if (userEquip.includes(item)) {
            pill.classList.add('active');
          }
          pill.addEventListener('click', function() {
            toggleEquipment(item);
          });
          equipDisplay.appendChild(pill);
        });
      } else {
        equipSection.style.display = 'none';
      }

      // Show gym equipment section for gym training
      var gymEquipSection = document.getElementById('gym-equipment-section');
      if (currentUser.environment === 'gym') {
        gymEquipSection.style.display = 'block';
        var gymEquipGrid = document.getElementById('gym-equipment-grid');
        var userGymEquip = currentUser.gymEquipment || [];
        
        var gymPills = gymEquipGrid.querySelectorAll('.equip-pill');
        gymPills.forEach(function(pill) {
          pill.classList.remove('active');
          var equipKey = pill.dataset.gymEquip;
          if (userGymEquip.includes(equipKey)) {
            pill.classList.add('active');
          }
          
          pill.removeEventListener('click', pill._clickHandler);
          pill._clickHandler = function() {
            var gymEquipment = currentUser.gymEquipment || [];
            var idx = gymEquipment.indexOf(equipKey);
            
            if (idx >= 0) {
              gymEquipment.splice(idx, 1);
              pill.classList.remove('active');
            } else {
              gymEquipment.push(equipKey);
              pill.classList.add('active');
            }
            
            currentUser.gymEquipment = gymEquipment;
          };
          pill.addEventListener('click', pill._clickHandler);
        });
      } else {
        gymEquipSection.style.display = 'none';
      }

      // Training frequency selector
      var frequencyContainer = document.getElementById('frequency-choices');
      if (frequencyContainer) {
        var pills = frequencyContainer.querySelectorAll('.env-pill');
        var userFrequency = currentUser.trainingFrequency || 4;
        
        pills.forEach(function(pill) {
          pill.classList.remove('active');
          var freq = parseInt(pill.dataset.frequency);
          if (freq === userFrequency) {
            pill.classList.add('active');
          }
          
          pill.addEventListener('click', function() {
            pills.forEach(function(p) { p.classList.remove('active'); });
            pill.classList.add('active');
            updateActiveUser({ trainingFrequency: freq });
            currentUser.trainingFrequency = freq;
            
            // Auto-select default days based on frequency
            var defaultDays = getDefaultTrainingDays(freq);
            updateActiveUser({ trainingDays: defaultDays });
            currentUser.trainingDays = defaultDays;
            renderGoalPage();
            renderWorkoutPage();
          });
        });
      }

      // Training days selector
      var daysContainer = document.getElementById('training-days-selector');
      if (daysContainer) {
        // Clear existing event listeners by cloning and replacing
        var newDaysContainer = daysContainer.cloneNode(true);
        daysContainer.parentNode.replaceChild(newDaysContainer, daysContainer);
        
        var dayPills = newDaysContainer.querySelectorAll('.equip-pill');
        var userDays = currentUser.trainingDays || [1, 2, 3, 4, 5];
        
        dayPills.forEach(function(pill) {
          pill.classList.remove('active');
          var dayIndex = parseInt(pill.dataset.day);
          if (userDays.includes(dayIndex)) {
            pill.classList.add('active');
          }
          
          pill.addEventListener('click', function() {
            var trainingDays = currentUser.trainingDays ? currentUser.trainingDays.slice() : [];
            var idx = trainingDays.indexOf(dayIndex);
            
            if (idx >= 0) {
              trainingDays.splice(idx, 1);
              pill.classList.remove('active');
            } else {
              trainingDays.push(dayIndex);
              pill.classList.add('active');
            }
            
            updateActiveUser({ trainingDays: trainingDays });
            currentUser.trainingDays = trainingDays;
            renderWorkoutPage();
          });
        });
      }
    }

    function getDefaultTrainingDays(frequency) {
      // Returns sensible default training days based on frequency
      var patterns = {
        3: [1, 3, 5],           // Mon, Wed, Fri
        4: [1, 2, 4, 5],        // Mon, Tue, Thu, Fri
        5: [1, 2, 3, 4, 5],     // Mon-Fri
        6: [1, 2, 3, 4, 5, 6]   // Mon-Sat
      };
      return patterns[frequency] || patterns[4];
    }

    function toggleEquipment(item) {
      if (!currentUser) return;
      var equipment = currentUser.equipment || [];
      
      if (item === 'none') {
        equipment = ['none'];
      } else {
        var idx = equipment.indexOf(item);
        if (idx >= 0) {
          equipment.splice(idx, 1);
        } else {
          equipment.push(item);
          var noneIdx = equipment.indexOf('none');
          if (noneIdx >= 0) {
            equipment.splice(noneIdx, 1);
          }
        }
      }
      
      updateActiveUser({ equipment: equipment });
      currentUser.equipment = equipment;
      renderGoalPage();
      renderWorkoutPage();
    }

    // RENDER DIET PAGE
    function renderDietPage() {
      if (!currentUser) return;

      var diet = DIETS[currentUser.goalKey];
      if (!diet) return;

      document.getElementById('diet-title').textContent = diet.title;
      document.getElementById('diet-goal').textContent = diet.goal;

      var pillContainer = document.getElementById('diet-pills');
      pillContainer.innerHTML = '';
      var tags = ['Nigerian Foods', 'Training Day', 'Whole Foods'];
      tags.forEach(function(tag) {
        var pill = document.createElement('div');
        pill.className = 'pill';
        pill.textContent = tag;
        pillContainer.appendChild(pill);
      });

      var blocksContainer = document.getElementById('diet-blocks');
      blocksContainer.innerHTML = '';

      diet.blocks.forEach(function(block) {
        var blockDiv = document.createElement('div');
        blockDiv.className = 'diet-block';

        var title = document.createElement('h3');
        title.className = 'diet-block-title';
        title.textContent = block.label;
        blockDiv.appendChild(title);

        var items = document.createElement('div');
        items.className = 'diet-items';

        block.items.forEach(function(item) {
          var itemDiv = document.createElement('div');
          itemDiv.className = 'diet-item';
          itemDiv.textContent = item;
          items.appendChild(itemDiv);
        });

        blockDiv.appendChild(items);
        blocksContainer.appendChild(blockDiv);
      });
    }

    // RENDER HISTORY PAGE
    function renderHistoryPage() {
      if (!currentUser) return;

      var sessions = loadSessionsForUser(currentUser.id);
      var list = document.getElementById('history-list');

      if (sessions.length === 0) {
        list.innerHTML = '<div class="empty-state"><div class="empty-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 48px; height: 48px;"><path d="M3 3v18h18"/><path d="M18 17V9l-5 5-3-3-4 4" stroke-width="2.5"/><circle cx="18" cy="9" r="1.5" fill="currentColor"/></svg></div><h3 class="empty-title">No Workouts Yet</h3><p class="empty-description">Finish your first workout to see it here!</p></div>';
        return;
      }

      list.innerHTML = '';
      sessions.sort(function(a, b) {
        return new Date(b.completedAt) - new Date(a.completedAt);
      });

      sessions.forEach(function(session) {
        var card = document.createElement('div');
        card.className = 'history-card';
        card.style.cursor = 'pointer';
        card.dataset.sessionId = session.id;

        var date = new Date(session.completedAt);
        var dateStr = date.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric', year: 'numeric' });
        var timeStr = date.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });

        var dateDiv = document.createElement('div');
        dateDiv.className = 'history-date';
        dateDiv.textContent = dateStr + ' at ' + timeStr;

        var workout = document.createElement('div');
        workout.className = 'history-workout';
        workout.textContent = session.workoutLabel || 'workout';

        var stats = document.createElement('div');
        stats.className = 'history-stats';
        
        // Show comprehensive stats
        var totalExercises = session.totalExercises || (session.exercises ? session.exercises.length : 0);
        var completedEx = session.completedExercises || totalExercises;
        var totalSets = session.totalSets || 0;
        var completionPercent = totalExercises > 0 ? Math.round((completedEx / totalExercises) * 100) : 100;
        
        var statsHTML = '';
        statsHTML += '<span class="history-stat"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" style="width: 16px; height: 16px; margin-right: 4px;"><path d="M6 9a6 6 0 0 1 12 0v6a3 3 0 0 1-6 0V9a3 3 0 0 0-6 0v6"/></svg> ' + completedEx + '/' + totalExercises + ' exercises</span>';
        if (totalSets > 0) {
          statsHTML += '<span class="history-stat"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" style="width: 16px; height: 16px; margin-right: 4px;"><circle cx="12" cy="12" r="9"/><circle cx="12" cy="12" r="5" fill="currentColor" opacity="0.3"/></svg> ' + totalSets + ' sets completed</span>';
        }
        statsHTML += '<span class="history-stat"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" style="width: 16px; height: 16px; margin-right: 4px;"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> ' + completionPercent + '% complete</span>';
        
        stats.innerHTML = statsHTML;

        // Add completion bar
        var progressBar = document.createElement('div');
        progressBar.style.cssText = 'margin-top: 12px; height: 6px; background: var(--surface-elevated); border-radius: 3px; overflow: hidden;';
        var progressFill = document.createElement('div');
        progressFill.style.cssText = 'height: 100%; width: ' + completionPercent + '%; background: linear-gradient(90deg, var(--accent-primary), var(--success)); transition: width 0.3s ease;';
        progressBar.appendChild(progressFill);

        // Add collapsible detailed breakdown
        var breakdown = document.createElement('div');
        breakdown.className = 'history-breakdown';
        breakdown.style.cssText = 'margin-top: 12px; padding-top: 12px; border-top: 1px solid var(--border); font-size: 13px; color: var(--text-secondary); display: none; max-height: 0; overflow: hidden; transition: max-height 0.3s ease;';
        breakdown.dataset.expanded = 'false';
        
        var breakdownHTML = '<div style="font-weight: 600; margin-bottom: 12px; color: var(--text-primary); font-size: 14px;"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 18px; height: 18px; display: inline-block; vertical-align: middle; margin-right: 6px;"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="9" y1="15" x2="15" y2="15"/><line x1="9" y1="12" x2="15" y2="12"/><line x1="9" y1="18" x2="13" y2="18"/></svg> Detailed Breakdown</div>';
        
        if (session.exercises && session.exercises.length > 0) {
          session.exercises.forEach(function(ex) {
            var checkmark = ex.setsCompleted > 0 ? 'âœ“' : 'â—‹';
            var opacity = ex.setsCompleted > 0 ? '1' : '0.5';
            var targetSets = ex.target.split('x')[0].trim();
            
            breakdownHTML += '<div style="margin: 12px 0; padding: 12px; background: var(--surface); border-radius: var(--radius-sm); opacity: ' + opacity + ';">';
            breakdownHTML += '<div style="font-weight: 600; color: var(--text-primary); margin-bottom: 6px;"><span style="color: var(--success); margin-right: 6px;">' + checkmark + '</span>' + ex.name + '</div>';
            breakdownHTML += '<div style="color: var(--text-tertiary); font-size: 12px; margin-bottom: 8px;">' + ex.target + '</div>';
            
            if (ex.setsData && ex.setsData.length > 0) {
              breakdownHTML += '<div style="display: flex; gap: 8px; flex-wrap: wrap;">';
              ex.setsData.forEach(function(set, setIdx) {
                var repsText = set.reps > 0 ? set.reps + ' reps' : '';
                var kgText = set.kg > 0 ? set.kg + ' kg' : '';
                var setText = [repsText, kgText].filter(Boolean).join(' Ã— ');
                if (setText) {
                  breakdownHTML += '<div style="padding: 4px 10px; background: rgba(168, 85, 247, 0.15); border: 1px solid rgba(168, 85, 247, 0.3); border-radius: 6px; font-size: 12px; color: var(--accent-secondary);">Set ' + (setIdx + 1) + ': ' + setText + '</div>';
                }
              });
              breakdownHTML += '</div>';
            } else {
              breakdownHTML += '<div style="color: var(--accent-primary);">' + ex.setsCompleted + '/' + targetSets + ' sets completed</div>';
            }
            
            breakdownHTML += '</div>';
          });
        }
        
        breakdown.innerHTML = breakdownHTML;

        // Add expand/collapse indicator
        var expandIndicator = document.createElement('div');
        expandIndicator.style.cssText = 'text-align: center; margin-top: 8px; color: var(--text-tertiary); font-size: 12px; font-weight: 600;';
        expandIndicator.textContent = 'â–¼ Click to expand details';

        card.appendChild(dateDiv);
        card.appendChild(workout);
        card.appendChild(stats);
        card.appendChild(progressBar);
        card.appendChild(expandIndicator);
        card.appendChild(breakdown);

        // Add click handler to expand/collapse
        card.addEventListener('click', function() {
          var isExpanded = breakdown.dataset.expanded === 'true';
          
          // Close all other expanded cards first
          var allCards = list.querySelectorAll('.history-card');
          allCards.forEach(function(otherCard) {
            if (otherCard !== card) {
              var otherBreakdown = otherCard.querySelector('.history-breakdown');
              var otherIndicator = otherCard.querySelector('div[style*="text-align: center"]');
              if (otherBreakdown && otherBreakdown.dataset.expanded === 'true') {
                otherBreakdown.style.display = 'none';
                otherBreakdown.style.maxHeight = '0';
                otherBreakdown.dataset.expanded = 'false';
                if (otherIndicator) otherIndicator.textContent = 'â–¼ Click to expand details';
                otherCard.style.transform = 'translateY(0)';
              }
            }
          });
          
          if (isExpanded) {
            breakdown.style.display = 'none';
            breakdown.style.maxHeight = '0';
            breakdown.dataset.expanded = 'false';
            expandIndicator.textContent = 'â–¼ Click to expand details';
            card.style.transform = 'translateY(0)';
          } else {
            breakdown.style.display = 'block';
            breakdown.style.maxHeight = '1000px';
            breakdown.dataset.expanded = 'true';
            expandIndicator.textContent = 'â–² Click to collapse';
            card.style.transform = 'translateY(-2px)';
          }
        });

        list.appendChild(card);
      });
    }

    // FINISH WORKOUT
    function finishWorkout() {
      if (!currentUser || !currentDayPlan) return;

      // Calculate workout statistics
      var totalSets = 0;
      var completedCount = 0;
      var exerciseDetails = [];
      
      currentDayPlan.exercises.forEach(function(ex, idx) {
        var setsData = [];
        var completedSets = 0;
        
        // Parse target to get number of sets
        var numSets = 3; // default
        var targetMatch = ex.target.match(/(\d+)\s*x/i);
        if (targetMatch) {
          numSets = parseInt(targetMatch[1]);
        }
        
        for (var i = 1; i <= numSets; i++) {
          var repsInput = document.querySelector('[data-exercise-index="' + idx + '"][data-set-index="' + i + '"][data-input-type="reps"]');
          var kgInput = document.querySelector('[data-exercise-index="' + idx + '"][data-set-index="' + i + '"][data-input-type="kg"]');
          
          var reps = repsInput && repsInput.value ? parseInt(repsInput.value) : 0;
          var kg = kgInput && kgInput.value ? parseFloat(kgInput.value) : 0;
          
          if (reps > 0 || kg > 0) {
            setsData.push({ reps: reps, kg: kg });
            completedSets++;
            totalSets++;
          }
        }
        
        if (completedExercises[idx]) {
          completedCount++;
        }
        
        exerciseDetails.push({
          name: ex.name,
          target: ex.target,
          setsCompleted: completedSets,
          setsData: setsData
        });
      });

      var session = {
        id: 's_' + Date.now(),
        userId: currentUser.id,
        workoutLabel: currentDayPlan.label,
        exercises: exerciseDetails,
        totalExercises: currentDayPlan.exercises.length,
        completedExercises: completedCount,
        totalSets: totalSets,
        completedAt: new Date().toISOString(),
        duration: null // Will be calculated if we track start time
      };

      var sessions = loadSessionsForUser(currentUser.id);
      sessions.push(session);
      saveSessionsForUser(currentUser.id, sessions);

      completedExercises = [];
      spawnConfetti();
      
      setTimeout(function() {
        renderWorkoutPage();
        updateStreak();
      }, 500);
    }

    // CONFETTI
    function spawnConfetti() {
      var layer = document.getElementById('celebrate-layer');
      var svg = '<svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><rect x="10" y="28" width="44" height="8" rx="3" fill="#e9d5ff"/><rect x="4" y="22" width="6" height="20" rx="2" fill="#a855f7"/><rect x="54" y="22" width="6" height="20" rx="2" fill="#a855f7"/></svg>';
      
      for (var i = 0; i < 20; i++) {
        var el = document.createElement('div');
        el.className = 'dumbbell-confetti';
        var angle = (Math.random() * 2 - 1);
        var distance = 140 + Math.random() * 200;
        var dx = Math.cos(angle * 1.3) * distance;
        var dy = -Math.abs(Math.sin(angle)) * distance;
        el.style.setProperty('--dx', dx + 'px');
        el.style.setProperty('--dy', dy + 'px');
        el.style.left = (window.innerWidth * (0.2 + 0.6 * Math.random())) + 'px';
        el.style.top = (window.innerHeight * 0.5) + 'px';
        el.innerHTML = svg;
        layer.appendChild(el);
        
        setTimeout(function(node) {
          if (node && node.parentNode) {
            node.parentNode.removeChild(node);
          }
        }, 1600, el);
      }
    }

    // UPDATE STREAK
    function updateStreak() {
      if (!currentUser) return;
      var streak = computeStreakForUser(currentUser.id);
      document.getElementById('streak-label').textContent = streak + (streak === 1 ? ' day' : ' days');
    }

    // ONBOARDING
    function initOnboarding() {
      var overlay = document.getElementById('onboarding-overlay');
      var equipContainer = document.getElementById('onboarding-equipment');
      
      equipContainer.addEventListener('click', function(e) {
        if (!e.target.classList.contains('equip-pill')) return;
        var key = e.target.dataset.equip;
        if (key === 'none') {
          equipContainer.querySelectorAll('.equip-pill').forEach(function(p) {
            p.classList.remove('active');
          });
          e.target.classList.add('active');
        } else {
          e.target.classList.toggle('active');
          var nonePill = equipContainer.querySelector('[data-equip="none"]');
          if (nonePill) nonePill.classList.remove('active');
        }
      });

      document.getElementById('onboarding-save').addEventListener('click', function() {
        var name = document.getElementById('onboarding-name').value;
        var goalKey = document.getElementById('onboarding-goal').value;
        var env = document.getElementById('onboarding-env').value;
        
        var equipment = [];
        equipContainer.querySelectorAll('.equip-pill.active').forEach(function(pill) {
          equipment.push(pill.dataset.equip);
        });

        createUser(name, goalKey, env, equipment);
        overlay.classList.remove('active');
        init();
      });

      var user = getActiveUser();
      if (!user) {
        overlay.classList.add('active');
      }
    }

    // INIT
    function init() {
      currentUser = getActiveUser();
      if (!currentUser) return;

      currentPlan = getActivePlan();
      applyTheme(loadTheme());
      updateStreak();
      
      renderWorkoutPage();
      renderGoalPage();
      renderDietPage();
      renderHistoryPage();

      var navItems = document.querySelectorAll('.nav-item');
      navItems.forEach(function(item) {
        item.addEventListener('click', function() {
          switchPage(item.dataset.page);
        });
      });

      document.getElementById('finish-workout-btn').addEventListener('click', finishWorkout);
      
      document.getElementById('streak-badge').addEventListener('click', function() {
        updateStreak();
      });

      document.getElementById('edit-workout-btn').addEventListener('click', function() {
        switchPage('goal');
      });

      document.getElementById('edit-schedule-btn').addEventListener('click', function() {
        switchPage('goal');
      });

      document.getElementById('save-settings-btn').addEventListener('click', function() {
        // Save all current settings
        updateActiveUser({
          goalKey: currentUser.goalKey,
          environment: currentUser.environment,
          equipment: currentUser.equipment,
          gymEquipment: currentUser.gymEquipment,
          trainingFrequency: currentUser.trainingFrequency,
          trainingDays: currentUser.trainingDays
        });
        
        // Show success toast
        showSaveToast();
        
        // Refresh views
        renderWorkoutPage();
        renderGoalPage();
        renderDietPage();
      });
    }

    // SHOW SAVE TOAST NOTIFICATION
    function showSaveToast() {
      var toast = document.getElementById('save-toast');
      toast.classList.add('show');
      
      setTimeout(function() {
        toast.classList.remove('show');
      }, 3000);
    }

    // FAQ MODAL HANDLERS
    function openFaqModal() {
      var modal = document.getElementById('faq-modal');
      modal.classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    function closeFaqModal() {
      var modal = document.getElementById('faq-modal');
      modal.classList.remove('active');
      document.body.style.overflow = '';
    }

    // START
    document.addEventListener('DOMContentLoaded', function() {
      initOnboarding();
      init();

      // FAQ button handlers
      document.getElementById('help-btn').addEventListener('click', openFaqModal);
      document.getElementById('faq-close').addEventListener('click', closeFaqModal);
      
      // Close FAQ when clicking outside
      document.getElementById('faq-modal').addEventListener('click', function(e) {
        if (e.target.id === 'faq-modal') {
          closeFaqModal();
        }
      });
    });
  </script>

  <!-- FAQ MODAL -->
  <div class="faq-modal" id="faq-modal">
    <div class="faq-content">
      <div class="faq-header">
        <h2 class="faq-title">ðŸ“– Help & Guide</h2>
        <button class="faq-close" id="faq-close">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>
      <div class="faq-body">
        
        <!-- GETTING STARTED -->
        <div class="faq-section">
          <h3 class="faq-section-title">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
              <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
            </svg>
            Getting Started
          </h3>
          
          <div class="faq-item">
            <h4 class="faq-question">ðŸŽ¯ What is WorkoutFrenzy?</h4>
            <p class="faq-answer">WorkoutFrenzy is your personal workout tracker that adapts to your goals, equipment, and schedule. Whether you want to <strong>build muscle</strong>, <strong>lose weight</strong>, or <strong>keep fit</strong>, we create customized workout plans for you.</p>
          </div>

          <div class="faq-item">
            <h4 class="faq-question">ðŸš€ How do I start?</h4>
            <p class="faq-answer">On first launch, you'll go through a quick setup where you choose your <strong>name</strong>, <strong>fitness goal</strong>, <strong>training environment</strong> (home or gym), and <strong>available equipment</strong>. The app then generates a personalized workout plan just for you!</p>
          </div>

          <div class="faq-item">
            <h4 class="faq-question">ðŸ’¾ Is my data saved?</h4>
            <p class="faq-answer">Yes! All your data is saved locally in your browser's storage. As long as you use the same browser on the same device, your workouts, history, and settings will be preserved.</p>
            <div class="faq-tip">ðŸ’¡ Tip: Use the same browser to keep all your progress!</div>
          </div>
        </div>

        <!-- WORKOUT PAGE -->
        <div class="faq-section">
          <h3 class="faq-section-title">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
              <path d="M6.5 6.5L17.5 17.5M17.5 6.5L6.5 17.5"/>
              <circle cx="12" cy="12" r="2" fill="currentColor"/>
            </svg>
            Workout Page
          </h3>
          
          <div class="faq-item">
            <h4 class="faq-question">ðŸ“… Weekly Calendar</h4>
            <p class="faq-answer">At the top, you'll see a 7-day calendar showing which days are <strong>training days</strong> (highlighted) and <strong>rest days</strong>. Today is marked with a special indicator.</p>
          </div>

          <div class="faq-item">
            <h4 class="faq-question">ðŸ’ª Daily Motivation</h4>
            <p class="faq-answer">Each day shows a <strong>different snarky motivation quote</strong> to keep you fired up! These change daily to keep things fresh.</p>
          </div>

          <div class="faq-item">
            <h4 class="faq-question">ðŸ“ Exercise Cards</h4>
            <p class="faq-answer">Each exercise shows:</p>
            <p class="faq-answer">â€¢ <strong>Exercise name</strong> with an icon<br>â€¢ <strong>Target sets Ã— reps</strong> (e.g., "3 x 12-15")<br>â€¢ <strong>Input fields</strong> for tracking reps and weight (kg)</p>
            <div class="faq-tip">ðŸ’¡ The number of input boxes automatically matches your workout! 3 sets = 3 input rows.</div>
          </div>

          <div class="faq-item">
            <h4 class="faq-question">âœ… Tracking Your Workout</h4>
            <p class="faq-answer">For each set, enter:<br>â€¢ <strong>Reps</strong>: How many repetitions you did<br>â€¢ <strong>kg</strong>: How much weight you used (optional for bodyweight exercises)</p>
            <p class="faq-answer">The completion bar at the bottom tracks your progress. Hit <strong>"Finish Workout"</strong> when done to log it!</p>
          </div>

          <div class="faq-item">
            <h4 class="faq-question">ðŸ–ï¸ Rest Days</h4>
            <p class="faq-answer">On rest days, you'll see a relaxation message suggesting <strong>light walks, mobility work, and hydration</strong>. You can click <strong>"Edit Training Days"</strong> to adjust your schedule.</p>
          </div>

          <div class="faq-item">
            <h4 class="faq-question">ðŸ”¥ Streak Counter</h4>
            <p class="faq-answer">The flame badge in the top-right shows how many consecutive days you've worked out. Keep the streak alive!</p>
          </div>
        </div>

        <!-- GOAL PAGE -->
        <div class="faq-section">
          <h3 class="faq-section-title">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10"/>
              <polyline points="12 6 12 12 16 14"/>
            </svg>
            Goal & Settings
          </h3>
          
          <div class="faq-item">
            <h4 class="faq-question">ðŸŽ¯ Fitness Goals</h4>
            <p class="faq-answer">Choose from three goals:</p>
            <p class="faq-answer">â€¢ <strong>Build Muscle</strong>: 4-day splits with progressive overload<br>â€¢ <strong>Lose Weight</strong>: 3-5 days of calorie-burning circuits<br>â€¢ <strong>Keep Fit</strong>: 3-day full-body maintenance</p>
          </div>

          <div class="faq-item">
            <h4 class="faq-question">ðŸ  Training Environment</h4>
            <p class="faq-answer">Toggle between <strong>Train at Home</strong> and <strong>Train in Gym</strong>. Your workouts automatically adapt!</p>
          </div>

          <div class="faq-item">
            <h4 class="faq-question">ðŸ”§ Home Equipment</h4>
            <p class="faq-answer">Select what you have: chairs, dumbbells, resistance bands, etc. The app creates workouts using <strong>only your available equipment</strong>.</p>
            <div class="faq-tip">ðŸ’¡ Select "None at All" for pure bodyweight training!</div>
          </div>

          <div class="faq-item">
            <h4 class="faq-question">ðŸ‹ï¸ Gym Equipment</h4>
            <p class="faq-answer">When training at the gym, select from <strong>40+ equipment options</strong> like barbells, cable machines, leg press, etc. Your workouts will use the equipment you select.</p>
          </div>

          <div class="faq-item">
            <h4 class="faq-question">ðŸ“… Training Schedule</h4>
            <p class="faq-answer">Choose <strong>how many days</strong> per week (3-6 days) and <strong>which specific days</strong> you want to train. Rest days are automatically set for unselected days.</p>
          </div>

          <div class="faq-item">
            <h4 class="faq-question">ðŸ’¾ Save Changes Button</h4>
            <p class="faq-answer">After adjusting your settings, click <strong>"Save Changes"</strong> at the bottom. You'll see a green success notification!</p>
          </div>
        </div>

        <!-- NUTRITION PAGE -->
        <div class="faq-section">
          <h3 class="faq-section-title">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
              <path d="M18 8h1a4 4 0 0 1 0 8h-1M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"/>
              <line x1="6" y1="1" x2="6" y2="4"/>
              <line x1="10" y1="1" x2="10" y2="4"/>
              <line x1="14" y1="1" x2="14" y2="4"/>
            </svg>
            Nutrition Guide
          </h3>
          
          <div class="faq-item">
            <h4 class="faq-question">ðŸ² Nigerian Food Focus</h4>
            <p class="faq-answer">The nutrition guide features <strong>Nigerian foods</strong> tailored to your fitness goal with meal suggestions for breakfast, lunch, and dinner.</p>
          </div>

          <div class="faq-item">
            <h4 class="faq-question">ðŸŽ¯ Goal-Based Nutrition</h4>
            <p class="faq-answer">Each goal has different nutritional strategies:</p>
            <p class="faq-answer">â€¢ <strong>Weight Loss</strong>: Calorie deficit with high protein/fiber<br>â€¢ <strong>Build Muscle</strong>: Calorie surplus with high protein<br>â€¢ <strong>Keep Fit</strong>: Balanced maintenance nutrition</p>
          </div>
        </div>

        <!-- HISTORY PAGE -->
        <div class="faq-section">
          <h3 class="faq-section-title">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
              <path d="M3 3v18h18"/>
              <path d="M18 17V9l-5 5-3-3-4 4"/>
            </svg>
            Workout History
          </h3>
          
          <div class="faq-item">
            <h4 class="faq-question">ðŸ“Š History Cards</h4>
            <p class="faq-answer">Each workout shows:</p>
            <p class="faq-answer">â€¢ Date and time completed<br>â€¢ Workout name<br>â€¢ Exercises completed<br>â€¢ Total sets<br>â€¢ Completion percentage</p>
          </div>

          <div class="faq-item">
            <h4 class="faq-question">ðŸ“‹ Detailed Breakdown</h4>
            <p class="faq-answer"><strong>Click any history card</strong> to expand it and see:</p>
            <p class="faq-answer">â€¢ Every exercise performed<br>â€¢ Set-by-set data (reps Ã— kg)<br>â€¢ Which exercises were completed</p>
            <div class="faq-tip">ðŸ’¡ Only one card expands at a time - opening another closes the previous one!</div>
          </div>

          <div class="faq-item">
            <h4 class="faq-question">ðŸ“ˆ Track Your Progress</h4>
            <p class="faq-answer">Use history to see if you're <strong>progressively overloading</strong> - increasing weight or reps over time!</p>
          </div>
        </div>

        <!-- PRO TIPS -->
        <div class="faq-section">
          <h3 class="faq-section-title">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
              <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>
            </svg>
            Pro Tips
          </h3>
          
          <div class="faq-item">
            <h4 class="faq-question">ðŸ’¡ Best Practices</h4>
            <p class="faq-answer">â€¢ <strong>Log immediately</strong> after each set for accuracy<br>â€¢ <strong>Track weight increases</strong> to monitor progress<br>â€¢ <strong>Check history</strong> before workouts to beat previous numbers<br>â€¢ <strong>Adjust schedule</strong> if you miss days - consistency matters!<br>â€¢ <strong>Use the same browser</strong> to keep your data</p>
          </div>

          <div class="faq-item">
            <h4 class="faq-question">ðŸ“± Mobile App</h4>
            <p class="faq-answer">On mobile, tap your browser menu and select <strong>"Add to Home Screen"</strong> for an app-like experience!</p>
          </div>

          <div class="faq-item">
            <h4 class="faq-question">ðŸŽ¨ Themes</h4>
            <p class="faq-answer">The app has a beautiful dark theme optimized for gym environments. More themes coming soon!</p>
          </div>
        </div>

        <!-- TROUBLESHOOTING -->
        <div class="faq-section">
          <h3 class="faq-section-title">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
              <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/>
            </svg>
            Troubleshooting
          </h3>
          
          <div class="faq-item">
            <h4 class="faq-question">â“ Lost my data?</h4>
            <p class="faq-answer">Data is stored in your browser. If you cleared browser data, switched browsers, or used incognito mode, your data won't be there. Always use the same browser!</p>
          </div>

          <div class="faq-item">
            <h4 class="faq-question">â“ App not loading?</h4>
            <p class="faq-answer">Try refreshing the page (Ctrl+R or Cmd+R). If that doesn't work, clear your browser cache.</p>
          </div>

          <div class="faq-item">
            <h4 class="faq-question">â“ Wrong workout shown?</h4>
            <p class="faq-answer">Go to <strong>Goal</strong> tab and verify your training days are set correctly. Click <strong>"Save Changes"</strong> after adjusting.</p>
          </div>

          <div class="faq-item">
            <h4 class="faq-question">â“ Want to start over?</h4>
            <p class="faq-answer">Clear your browser's local storage for this site to reset everything. Note: This will erase all your workout history!</p>
          </div>
        </div>

      </div>
    </div>
  </div>

</body>
</html>
